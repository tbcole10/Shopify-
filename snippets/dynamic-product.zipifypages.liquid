{%- comment -%}
  Updated: 08/14/2024
  This file is system-generated and should not be modified. We reserve the right to overwrite it at any moment to add improvements or new features so that customizations you made might be lost
  Please, read through this article to make sure that your customizations will be preserved: https://help.zipify.com/en/articles/877075-zipify-pages-advanced-work-with-buy-box-blocks
{%- endcomment -%}{% assign zp_rcprewso = false %}{% if renderscope == 'metafield' %}{% assign zp_rndr_prdct_frmtfld = true %}{% assign zp_rndr_prdct_frtg = false %}{% else %}{% assign zp_rndr_prdct_frmtfld = false %}{% assign zp_rndr_prdct_frtg = true %}{% endif %}{% assign zp_dynamic_product_section_excluded = true %}{% assign zp_dynamic_product_section_markup_excluded = true %}{% if zp_rndr_prdct_frmtfld %}{% if zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_entity_products = zp_current_entity_metafields['config'].value['products'] %}{% else %}{% assign zp_entity_products = zp_current_entity_metafields['config']['products'] %}{% endif %}{% if zp_product_page_with_zp_layout %}{% for zp_part in zp_entity_products %}{% assign zp_current_product_settings = zp_part | last %}{% if zp_current_product_settings['vtp'] == 'dynamicproductsection' %}{% assign zp_dynamic_product_section_excluded = false %}{% break %}{% endif %}{% endfor %}{% endif %}{% else %}{% assign zp_entity_products = zp_current_entity_content | split: '<zpdproduct ' %}{% assign zp_current_entity_content = '' %}{% endif %}{% if zp_product_image_size == nil %}{% assign zp_current_product_image_size = '1080x' %}{% else %}{% assign zp_current_product_image_size = zp_product_image_size %}{% endif %}{% assign zp_empty_image_src = 'no-image.gif' | img_url: zp_current_product_image_size %} 
{%- for zp_part in zp_entity_products -%}{% if zp_rndr_prdct_frmtfld %}{% assign zp_prd_blkmrkr = zp_part | first %}{% assign zp_current_product_settings = zp_part | last %}{% assign zp_product_content_parts_size = 2 %}{% else %}{% assign zp_product_content = zp_part | append: ' ' | split: '</zpdproduct>' %}{% assign zp_product_content_parts_size = zp_product_content | size %}{% endif %}{%- if zp_product_content_parts_size < 2 -%}{% assign zp_current_entity_content = zp_current_entity_content | append: zp_part %}{%- else -%}{% assign zp_prdct_shcrlenbl = false %}{% assign zp_display_product_markup = false %}{% assign zp_product_as_current_entity = false %}{% assign zp_product_handle = '' %}{% assign zp_selected_variants = '' %}{% assign zp_selected_variants_list = '' %}{% assign zp_product_default_quantity = '1' %}{% assign zp_product_show_quantity = true %}{% assign zp_product_link_type = 'cart' %}{% assign zp_product_link_types = nil %}{% assign zp_redirect_product_url = routes.cart_url %}{% assign zp_product_type = 'base' %}{% assign zp_product_add_to_cart_msg = 'Product has been added to cart' %}{% assign zp_product_button_link_target = '_self' %}{% assign zp_product_image_type = 'product' %}{% assign zp_product_discount_data = '' %}{% assign zp_product_block_id = '' %}{% assign zp_product_element_id = nil %}{% assign zp_product_add_to_cart_classes = '' %}{% assign zp_product_message_wrapper_classes = '' %}{% assign zp_product_variant_selector_label_classes = '' %}{% assign zp_product_quantity_selector_label_classes = '' %}{% assign zp_prd_vrntsslctr_vw = 'vt' %}{% assign zp_product_image_sizes_data = '' %}{% assign zp_product_form_classes = '' %}{% assign zp_product_view_type = 'dynamicbuybox' %}{% assign zp_product_static_price_content = '' %}{% assign zp_product_static_compare_price_content = '' %}{% assign zp_product_preload_variant_images = false %}{% assign zp_product_load_main_image = true %}{% assign zp_product_show_quantity_label = true %}{% assign zp_prd_vrntsslctr_cls = nil %}{% assign zp_prd_shwvrntsslctr_lbl = nil %}{% assign zp_prd_vrntsslctr_ofst_cls = nil %}{% assign zp_product_unit_price_tag_included = false %}{% assign zp_product_image_lazy_load = false %}{% assign zp_product_calculate_bundle_price = false %}{% assign zp_use_general_product_image_container = false %}{% assign zp_product_sold_out_view_enabled = false %}{% assign zp_update_external_product_price = false %}{% assign zp_prd_vrntsslctr_wrpr_cls = '' %}{% assign zp_prd_vrntsslctr_wrpr_cls_enbld = false %}{% assign zp_prd_optn_sttngs = nil %}{% assign zp_product_reviews_source = nil %}{% assign zp_product_reviews_data = nil %}{% assign zp_prd_shcrlid = nil %}{% assign zp_prd_shcrlmfid = nil %}{% assign zp_enable_product_image_linking = true %}{% assign zp_shop_pay_widget_tag_included = false %}{% assign zp_prd_fpmtrmcptr = '' %}{% assign zp_bundle_block_enabled = false %}{% assign zp_cross_sell_block_enabled = false %}{% assign zp_cross_sell_config_key = 'crossSell' %}{% assign zp_prdbtns_json_dt = nil %}{% assign zp_prdvrnts_json_dt = nil %}{% assign zp_prdimgs_json_dt = nil %}{% assign zp_prdimgs_dt = nil %}{% assign zp_prdlpsbcren = false %}{% assign zp_pcrls_dt = nil %}{% assign zp_pcintrcsbcr = false %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_product_settings_keys = zp_current_product_settings %}{% capture zp_dynamic_product_block_closed_tag %}</zpdprdct_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_dynamic_product_block_schema_marker = '<zpprdmrkp></zpprdmrkp>' | append: zp_dynamic_product_block_closed_tag %}{% if zp_current_entity_content contains zp_dynamic_product_block_schema_marker %}{% assign zp_display_product_markup = true %}{% else %}{% assign zp_display_product_markup = false %}{% endif %}{% else %}{% if zp_product_content[0] contains '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_product_content[0] = zp_product_content[0] | remove: '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_display_product_markup = true %}{% else %}{% assign zp_display_product_markup = false %}{% endif %}{% assign zp_product_content_parts = zp_product_content[0] | append: ' ' | split: '>' %}{% assign zp_product_settings = zp_product_content_parts[0] %}{% assign zp_product_settings_tmp = zp_product_settings | append: '>' %}{% assign zp_product_content_parts = zp_product_content_parts | join: '>' | remove_first: zp_product_settings_tmp %}{% assign zp_product_settings = ' ' | append: zp_product_settings | split: ' data-' %}{% assign zp_product_settings_keys = '' %}{% assign zp_product_settings_values = '' %}{% for zp_product_setting in zp_product_settings %}{% assign zp_product_setting_parts = zp_product_setting | split: '=' %}{% if zp_product_setting_parts.size < 2 %}{% continue %}{% endif %}{% assign zp_prd_stng_k = '' | append: zp_product_setting_parts[0] | strip %}{% if zp_prd_stng_k.size < 1 %}{% continue %}{% endif %}{% assign zp_product_settings_keys = zp_product_settings_keys | append: zp_prd_stng_k | append: '__zp1502150400__' %}{% assign zp_product_setting_size = zp_product_setting | size %}{% assign zp_product_setting_key_size = '' | append: zp_product_setting_parts[0] | size | plus: 1 %}{% assign zp_prd_stng_vl = '' | append: zp_product_setting | slice: zp_product_setting_key_size, zp_product_setting_size | strip %}{% assign zp_product_setting_value_last_index = zp_prd_stng_vl | size | minus: 1 %}{% assign zp_product_setting_value_first_letter = zp_prd_stng_vl | first %}{% if zp_product_setting_value_first_letter == '"' or zp_product_setting_value_first_letter == "'" %}{% assign zp_prd_stng_vl = zp_prd_stng_vl | slice: 1, zp_product_setting_value_last_index %}{% endif %}{% assign zp_product_setting_value_last_index = zp_prd_stng_vl | size | minus: 1 %}{% assign zp_product_setting_value_last_letter = zp_prd_stng_vl | last %}{% if zp_product_setting_value_last_letter == '"' or zp_product_setting_value_last_letter == "'" %}{% assign zp_prd_stng_vl = zp_prd_stng_vl | slice: 0, zp_product_setting_value_last_index %}{% endif %}{% assign zp_product_settings_values = zp_product_settings_values | append: zp_prd_stng_vl | append: '__zp1502150400__' %}{% endfor %}{% assign zp_product_settings_keys = zp_product_settings_keys | split: '__zp1502150400__' %}{% assign zp_product_settings_values = zp_product_settings_values | split: '__zp1502150400__' %}{% assign zp_product_settings = nil %}{% assign zp_product_settings_tmp = nil %}{% assign zp_product_setting_parts = nil %}{% endif %}{% for zp_product_setting_key_data in zp_product_settings_keys %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_prd_stng_k = zp_product_setting_key_data | first %}{% assign zp_unstringified_product_setting_keys = 'btns,srtgs,vrnts,imgs,pcrls' | split: ',' %}{% if zp_unstringified_product_setting_keys contains zp_prd_stng_k %}{% assign zp_prd_stng_vl = zp_product_setting_key_data | last %}{% else %}{% assign zp_prd_stng_vl = zp_product_setting_key_data | last | strip %}{% endif %}{% assign zp_unstringified_product_setting_keys = nil %}{% else %}{% assign zp_prd_stng_k = zp_product_setting_key_data %}{% assign zp_prd_stng_vl = '' | append: zp_product_settings_values[forloop.index0] | strip %}{% endif %}{% case zp_prd_stng_k %}{% when 'handle' %}{% assign zp_product_handle = zp_prd_stng_vl %}{% when 'slctvrnt' %}{% assign zp_selected_variants = zp_prd_stng_vl %}{% assign zp_selected_variants_list = zp_prd_stng_vl %}{% when 'qty' %}{% assign zp_product_default_quantity = zp_prd_stng_vl %}{% when 'shwqty' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_show_quantity = true %}{% else %}{% assign zp_product_show_quantity = false %}{% endif %}{% when 'btnltp' %}{% assign zp_product_link_type = zp_prd_stng_vl | replace: '\', '&bsol;' %}{% when 'btns' %}{% assign zp_prdlnk_tps_str = '' %}{% assign zp_prdbtns_json_dt = '[' %}{% assign zp_prdbtns_aitm_sprtr = false %}{% for zp_prdct_sttng_val in zp_prd_stng_vl %}{% assign zp_prdlnk_tps_str = zp_prdlnk_tps_str | append: zp_prdct_sttng_val['tp'] | append: ',' %}{% if zp_prdbtns_aitm_sprtr %}{% assign zp_prdbtns_itm_sprtr = ',' %}{% else %}{% assign zp_prdbtns_itm_sprtr = '' %}{% endif %}{% assign zp_prdbtns_aitm_sprtr = true %}{% assign zp_prdbtns_json_dt = zp_prdbtns_json_dt | append: zp_prdbtns_itm_sprtr | append: '{' %}{% assign zp_prdbtns_aitmprp_sprtr = false %}{% for zp_prdct_sttng_nstval in zp_prdct_sttng_val %}{% if zp_prdbtns_aitmprp_sprtr %}{% assign zp_prdbttns_itmprp_sprtr = ',' %}{% else %}{% assign zp_prdbttns_itmprp_sprtr = '' %}{% endif %}{% assign zp_prdbtns_aitmprp_sprtr = true %}{% assign zp_prdsttng_nstk = zp_prdct_sttng_nstval | first | json %}{% assign zp_prdsttng_nstv = zp_prdct_sttng_nstval | last | url_escape | json %}{% assign zp_prdbtns_json_dt = zp_prdbtns_json_dt | append: zp_prdbttns_itmprp_sprtr | append: zp_prdsttng_nstk | append: ':' | append: zp_prdsttng_nstv %}{% endfor %}{% assign zp_prdbtns_json_dt = zp_prdbtns_json_dt | append: '}' %}{% endfor %}{% assign zp_product_link_types = zp_prdlnk_tps_str | split: ',' %}{% assign zp_prdbtns_json_dt = zp_prdbtns_json_dt | append: ']' %}{% when 'dcbe' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_use_product_form_action = true %}{% endif %}{% when 'url' %}{% assign zp_redirect_product_url = zp_prd_stng_vl | replace: '&amp;', '&' | url_escape | replace: '%23', '#' | replace: '%25', '%' %}{% when 'btncpt' %}{% assign zp_product_button_caption = zp_prd_stng_vl | replace: '\', '&bsol;' %}{% when 'stkbtncpt' %}{% assign zp_product_sticky_button_caption = zp_prd_stng_vl %}{% when 'type' %}{% assign zp_product_type = zp_prd_stng_vl %}{% when 'addcrtmsg' %}{% assign zp_product_add_to_cart_msg = zp_prd_stng_vl | replace: '\', '&bsol;' | url_escape %}{% when 'btnelt' %}{% assign zp_product_button_link_target = zp_prd_stng_vl %}{% when 'imgtp' %}{% assign zp_product_image_type = zp_prd_stng_vl %}{% when 'dscntdt' %}{% assign zp_product_discount_data = zp_prd_stng_vl %}{% when 'bid' %}{% assign zp_product_block_id = zp_prd_stng_vl %}{% when 'eid' %}{% assign zp_product_element_id = zp_prd_stng_vl %}{% when 'crtmsgcls' %}{% assign zp_product_add_to_cart_classes = zp_prd_stng_vl | url_escape %}{% when 'msgwrpcl' %}{% assign zp_product_message_wrapper_classes = zp_prd_stng_vl | url_escape %}{% when 'vrntcls' %}{% assign zp_prd_vrntsslctr_cls = zp_prd_stng_vl | url_escape %}{% when 'vrntoffcls' %}{% assign zp_prd_vrntsslctr_ofst_cls = zp_prd_stng_vl | url_escape %}{% when 'vrntwcls' %}{% assign zp_prd_vrntsslctr_wrpr_cls = zp_prd_stng_vl | url_escape %}{% when 'qtycls' %}{% assign zp_product_quantity_selector_label_classes = zp_prd_stng_vl %}{% when 'vrntsv' %}{% assign zp_prd_vrntsslctr_vw = zp_prd_stng_vl %}{% when 'imgszs' %}{% assign zp_product_image_sizes_data = zp_prd_stng_vl %}{% when 'frmcls' %}{% assign zp_product_form_classes = zp_prd_stng_vl %}{% when 'vtp' %}{% assign zp_product_view_type = zp_prd_stng_vl %}{% when 'stcprc' %}{% assign zp_product_static_price_content = zp_prd_stng_vl %}{% when 'stccprprc' %}{% assign zp_product_static_compare_price_content = zp_prd_stng_vl %}{% when 'optst' %}{% assign zp_prd_optn_sttngs = zp_prd_stng_vl %}{% when 'srtgs' %}{% assign zp_srtg_json_dt = '' %}{% assign zp_srtg_aitm_sprtr = false %}{% for zp_prdct_sttng_val in zp_prd_stng_vl %}{% if zp_prdct_sttng_val['rtgsrc'] != blank %}{% if zp_srtg_aitm_sprtr %}{% assign zp_srtg_itm_sprtr = ',' %}{% else %}{% assign zp_srtg_itm_sprtr = '' %}{% endif %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: zp_srtg_itm_sprtr | append: '{' %}{% assign zp_srtg_aitm_sprtr = true %}{% assign zp_srtg_aitmprp_sprtr = false %}{% for zp_prdct_sttng_nstval in zp_prdct_sttng_val %}{% if zp_srtg_aitmprp_sprtr %}{% assign zp_srtg_itmprp_sprtr = ',' %}{% else %}{% assign zp_srtg_itmprp_sprtr = '' %}{% endif %}{% assign zp_srtg_aitmprp_sprtr = true %}{% assign zp_srtg_snstk = zp_prdct_sttng_nstval | first | json %}{% assign zp_srtg_snstv = zp_prdct_sttng_nstval | last | json %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: zp_srtg_itmprp_sprtr | append: zp_srtg_snstk | append: ':' | append: zp_srtg_snstv %}{% endfor %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: '}' %}{% endif %}{% endfor %}{% assign zp_product_reviews_data = '[' | append: zp_srtg_json_dt | append: ']' %}{% when 'rtgsrc' %}{% assign zp_product_reviews_source = zp_prd_stng_vl %}{% when 'imgc' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_use_general_product_image_container = true %}{% endif %}{% when 'imgprld' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_preload_variant_images = true %}{% endif %}{% when 'mimgld' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_product_load_main_image = false %}{% endif %}{% when 'shwqtylb' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_product_show_quantity_label = false %}{% endif %}{% when 'shwvrntlb' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_prd_shwvrntsslctr_lbl = false %}{% else %}{% assign zp_prd_shwvrntsslctr_lbl = true %}{% endif %}{% when 'enpimglg' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_enable_product_image_linking = false %}{% endif %}{% when 'crntentt' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_as_current_entity = true %}{% endif %}{% when 'unprcincl' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_unit_price_tag_included = true %}{% endif %}{% when 'lzld' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_image_lazy_load = true %}{% endif %}{% when 'sldtv' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_sold_out_view_enabled = true %}{% endif %}{% when 'bndlprc' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_calculate_bundle_price = true %}{% endif %}{% when 'extpupd' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_update_external_product_price = true %}{% endif %}{% when 'spwincl' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_shop_pay_widget_tag_included = true %}{% endif %}{% when 'spcen' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_prdct_shcrlenbl = true %}{% endif %}{% when 'rcsbcr' %}{% if zp_prd_stng_vl == 'true' %}{% assign zp_pcintrcsbcr = true %}{% endif %}{% when 'spcid' %}{% assign zp_prd_shcrlid = zp_prd_stng_vl %}{% when 'spcpid' %}{% assign zp_prd_shcrlmfid = zp_prd_stng_vl %}{% when 'spsrcs' %}{% assign zp_pcrls_srss = zp_prd_stng_vl %}{% when 'dfttl' %}{% assign zp_product_title = zp_prd_stng_vl %}{% when 'dfbd' %}{% assign zp_product_description = zp_prd_stng_vl %}{% when 'crsslls' %}{% assign zp_cross_sell_block_enabled = true %}{% when 'bndl' %}{% assign zp_cross_sell_config_key = 'bundle' %}{% assign zp_bundle_block_enabled = true %}{% when 'vrnts' %}{% assign zp_prdvrnts_json_dt = zp_prd_stng_vl | json %}{% when 'imgs' %}{% assign zp_prdimgs_json_dt = zp_prd_stng_vl | json %}{% assign zp_prdimgs_dt = zp_prd_stng_vl %}{% when 'pcrls' %}{% assign zp_pcrls_dt = zp_prd_stng_vl %}{% endcase %}{% endfor %}{% if zp_product_link_types != blank %}{% for zp_link_type in zp_product_link_types %}{% if zp_shw_vrntsslctr_lnktps contains zp_link_type %}{% assign zp_product_link_type = zp_link_type %}{% break %}{% endif %}{% endfor %}{% endif %}{% if zp_product_link_type == 'cart' %}{% assign zp_redirect_product_url = routes.cart_url %}{% endif %}{% if zp_product_as_current_entity %}{% assign zp_product_handle_size = 1 %}{% else %}{% assign zp_product_handle_size = zp_product_handle.size %}{% endif %}{% if zp_prd_vrntsslctr_wrpr_cls.size > 0 %}{% assign zp_prd_vrntsslctr_wrpr_cls = 'zp ' | append: zp_prd_vrntsslctr_wrpr_cls %}{% assign zp_prd_vrntsslctr_wrpr_cls_enbld = true %}{% endif %}{% if zp_rndr_prdct_frtg and zp_prd_optn_sttngs != empty %}{% assign zp_prd_optn_sttngs = zp_prd_optn_sttngs | replace: '&quot;', '"' %}{% endif %}{% assign zp_first_selected_variant = nil %}{% assign zp_first_available_variant = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_product_schema_variant = nil %}{% assign zp_any_product_variant_available = false %}{% assign zp_current_product_price = nil %}{% assign zp_product_init_script = '' %}{% assign zp_product_additional_integrations = '' %}{% assign zp_prdct_fopntg = '' %}{% assign zp_prdct_fcstg = '' %}{% assign zp_unprdct_cls = ' hidden' %}{% assign zp_unprdct_blwrcls = '' %}{% assign zp_unprdct_lnkblcls = ' hidden' %}{% assign zp_unavailable_discount_class = '' %}{% assign zp_prdct_vrntctnr = '' %}{% assign zp_prdct_qtyctnr = '' %}{% assign zp_product_button_type = 'button' %}{% assign zp_prdct_btnintgrtns = '' %}{% assign zp_prdct_btnmsgs = '' %}{% assign zp_product_image = zp_empty_image_src %}{% assign zp_product_image_data_attrs = '' %}{% assign zp_product_wrapper_selector = '' %}{% assign zp_formatted_product_price = nil %}{% assign zp_formatted_product_compare_at_price = nil %}{% assign zp_unqtycls = ' hidden' %}{% assign zp_product_button_text = 'products.product.unavailable' | t %}{% if zp_product_button_text contains 'Translation missing' or zp_product_button_text contains 'translation missing' %}{% assign zp_product_button_text = "Unavailable" %}{% endif %}{% assign zp_product_sticky_button_text = 'products.product.unavailable' | t %}{% if zp_product_sticky_button_text contains 'Translation missing' or zp_product_sticky_button_text contains 'translation missing' %}{% assign zp_product_sticky_button_text = "Unavailable" %}{% endif %}{% assign zp_sale_price = nil %}{% assign zp_product_sale_price = nil %}{% assign zp_product_saved_amount = nil %}{% assign zp_product_discount_amount = nil %}{% assign zp_formatted_product_sale_price = nil %}{% assign zp_formatted_product_saved_amount = nil %}{% assign zp_formatted_product_discount_amount = nil %}{% assign zp_product_discount_amount_with_suffix = nil %}{% assign zp_prdct_imgldct = '' %}{% assign zp_current_product_custom_variants = nil %}{% assign zp_product_unit_price = '' %}{% assign zp_prdct_upwrcls = ' hidden' %}{% assign zp_available_cross_sell_products_count = 0 %}{% assign zp_uncs_wrprcls = ' hidden' %}{% assign zp_prdct_uplbl = '' %}{% assign zp_prdct_upblk = '' %}{% assign zp_unprdct_fptrmscls = 'hidden' %}{% assign zp_product_review_wrapper_classes = 'disabled hidden' %}{% assign zp_product_review_count = nil %}{% assign zp_product_review_rating = nil %}{% assign zp_product_review_rating_text = '' %}{% assign zp_cross_sell_config = nil %}{% assign zp_use_compare_price_as_retail = false %}{% assign zp_percentage_discount_diff_wrapper_class = 'hidden' %}{% if zp_use_current_entity_markup %}{% assign zp_product_custom_title = zp_current_entity.title %}{% assign zp_product_custom_description = zp_current_entity.description %}{% assign zp_product_custom_image = zp_current_product_settings['schm']['img'] %}{% else %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_current_product_schema_config = zp_current_product_settings['schm'] %}{% else %}{% assign zp_current_product_schema_config = zp_current_entity_schema_config[zp_product_block_id] %}{% endif %}{% assign zp_product_custom_title = zp_current_product_schema_config['title'] %}{% assign zp_product_custom_description = zp_current_product_schema_config['descr'] %}{% assign zp_product_custom_image = zp_current_product_schema_config['img'] %}{% assign zp_current_product_schema_config = nil %}{% endif %}{% if zp_product_view_type == 'dynamicproductsection' %}{% assign zp_use_product_variant_from_url = true %}{% assign zp_product_entity_type = 'main' %}{% else %}{% assign zp_use_product_variant_from_url = false %}{% assign zp_product_entity_type = 'alt' %}{% endif %}{% if zp_product_link_types != blank %}{% assign zp_shw_vrntsslctr = false %}{% for zp_link_type in zp_product_link_types %}{% if zp_shw_vrntsslctr_lnktps contains zp_link_type %}{% assign zp_shw_vrntsslctr = true %}{% break %}{% endif %}{% endfor %}{% elsif zp_shw_vrntsslctr_lnktps contains zp_product_link_type %}{% assign zp_shw_vrntsslctr = true %}{% else %}{% assign zp_shw_vrntsslctr = false %}{% endif %}{% assign zp_show_variants_selectors = zp_shw_vrntsslctr %}{% assign zp_enable_subscription_widget = zp_shw_vrntsslctr %}{% assign zp_display_shop_pay_widget = true %}{% assign zp_display_shop_pay_widget_by_price_range = false %}{% assign zp_product_iterator = zp_product_iterator | plus: 1 %}{% assign zp_product_selector = zp_main_product_selector | append: zp_product_iterator %}{% assign zp_product_wrapper_selector = zp_product_selector | append: zp_main_product_selector_suffix %}{% assign zp_main_product_available = true %}{% if zp_shw_vrntsslctr %}{% assign zp_unbndl_piwrcls = '' %}{% else %}{% assign zp_unbndl_piwrcls = 'hidden' %}{% endif %}{% assign zp_add_prdct_intstngs = '' %}{% assign zp_prdct_atnlclscontnt = '' %}{% assign zp_prdct_shcrlmdtpl = nil %}{% assign zp_prdct_shcrltmbtpl = nil %}{% assign zp_prdct_shcrlmds = '' %}{% assign zp_prdct_shcrltmb = '' %}{% assign zp_prdct_shcrljsn = '' %}{% assign zp_lpscrwgc = '' %}{% assign zp_aptscrwgc = '' %}{% assign zp_slscrwgc = '' %}{% assign zp_rcscrwgc = '' %}{% if zp_integrate_with_recharge or zp_pcintrcsbcr %}{% assign zp_pscrprrf = true %}{% else %}{% assign zp_pscrprrf = false %}{% endif %}{% assign zp_any_simple_bundle_product_available = false %}{% if zp_product_handle_size < 1 and zp_rndr_prdct_frmtfld %}{% assign zp_cross_sell_content_parts = zp_current_product_settings['bndl'] %}{% for zp_cross_sell_content_part in zp_cross_sell_content_parts %}{% assign zp_bundle_product_settings = zp_cross_sell_content_part | last %}{% assign zp_bundle_product_handle = zp_bundle_product_settings['handle'] | strip %}{% if zp_bundle_product_handle.size < 1 %}{% continue %}{% endif %}{% assign zp_bundle_product = all_products[zp_bundle_product_handle] %}{% if zp_bundle_product.available == true %}{% assign zp_bundle_product_use_product_variant_from_url = false %}{% assign zp_bundle_product_selected_variants = zp_bundle_product_settings['slctvrnt'] | strip %}{% assign zp_selected_variants = zp_bundle_product_selected_variants %}{% assign zp_selected_variants_list = zp_bundle_product_selected_variants %}{% if zp_bundle_product_product_custom_variants == blank %}{% assign zp_bundle_product_product_custom_variants = zp_bundle_product.variants %}{% endif %}{% if zp_bundle_product_selected_variants.size < 1 %}{% assign zp_bundle_product_selected_variants = zp_bundle_product_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_bundle_product_use_product_variant_from_url %}{% assign zp_url_selected_variant_id = '' | append: zp_bundle_product.selected_variant.id %}{% else %}{% assign zp_url_selected_variant_id = '' %}{% endif %}{% assign zp_filtered_selected_variants = '' %}{% assign zp_bundle_product_first_selected_variant = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_bundle_product_any_product_variant_available = false %}{% for zp_prd_variant in zp_bundle_product_product_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_bundle_product_use_product_variant_from_url and zp_url_selected_variant_id == zp_variant_id and zp_bundle_product_selected_variants contains zp_url_selected_variant_id %}{% assign zp_bundle_product_first_selected_variant = zp_prd_variant %}{% assign zp_current_selected_variant = zp_prd_variant %}{% endif %}{% if zp_bundle_product_selected_variants contains zp_variant_id %}{% assign zp_filtered_selected_variants = zp_filtered_selected_variants | append: zp_variant_id | append: ',' %}{% if zp_bundle_product_first_selected_variant == nil %}{% assign zp_bundle_product_first_selected_variant = zp_prd_variant %}{% endif %}{% if zp_prd_variant.available %}{% assign zp_bundle_product_any_product_variant_available = true %}{% endif %}{% endif %}{% endfor %}{% assign zp_bundle_product_selected_variants = zp_filtered_selected_variants | split: ',' %}{% if zp_bundle_product_selected_variants.size < 1 %}{% assign zp_bundle_product_selected_variants = zp_bundle_product_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% assign zp_bundle_product_any_product_variant_available = zp_bundle_product.available %}{% if zp_bundle_product_use_product_variant_from_url and zp_bundle_product_selected_variants contains zp_url_selected_variant_id %}{% assign zp_bundle_product_first_selected_variant = zp_bundle_product.selected_variant %}{% assign zp_current_selected_variant = zp_bundle_product.selected_variant %}{% else %}{% assign zp_bundle_product_first_selected_variant = zp_bundle_product_product_custom_variants | first %}{% endif %}{% endif %}{% unless zp_bundle_product_first_selected_variant.available %}{% assign zp_bundle_product_first_available_variant = nil %}{% for zp_prd_variant in zp_bundle_product_product_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_bundle_product_selected_variants contains zp_variant_id and zp_prd_variant.available %}{% assign zp_bundle_product_first_available_variant = zp_prd_variant %}{% break %}{% endif %}{% endfor %}{% unless zp_bundle_product_first_available_variant == nil %}{% assign zp_bundle_product_first_selected_variant = zp_bundle_product_first_available_variant %}{% endunless %}{% assign zp_bundle_product_first_available_variant = nil %}{% endunless %}{% assign zp_variant_id = nil %}{% unless zp_bundle_product_any_product_variant_available %}{% continue %}{% endunless %}{% assign zp_any_simple_bundle_product_available = true %}{% assign zp_prd_stng_vl = zp_bundle_product_settings['bndlprc'] | strip %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_calculate_bundle_price = true %}{% endif %}{% assign zp_product_discount_data = zp_bundle_product_settings['dscntdt'] | strip %}{% assign zp_prd_optn_sttngs = zp_bundle_product_settings['optst'] | strip %}{% assign zp_product_default_quantity = zp_bundle_product_settings['qty'] | strip %}{% assign zp_product_sold_out_view_enabled = false %}{% assign zp_prd_stng_vl = zp_bundle_product_settings['unprcincl'] | strip %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_product_unit_price_tag_included = true %}{% endif %}{% assign zp_product_show_quantity = false %}{% assign zp_use_compare_price_as_retail = true %}{% break %}{% endif %}{% endfor %}{% endif %}{% if zp_any_simple_bundle_product_available %}{% assign zp_smpbndlprdctwprprcls = '' %}{% else %}{% assign zp_smpbndlprdctwprprcls = 'hidden' %}{% endif %}{% assign zp_cross_sell_product = nil %}{% assign zp_cshndl = '' %}{% assign zp_csslcvrns = '' %}{% assign zp_csslvrnlst = '' %}{% assign zp_csblcid = '' %}{% assign zp_csimgsz = nil %}{% assign zp_csimgszjson = '[]' %}{% assign zp_csshwvrnlbl = nil %}{% assign zp_csvrntslvw = 'vt' %}{% assign zp_csvrntslofscls = nil %}{% assign zp_csdsctam = nil %}{% assign zp_cssvam = nil %}{% assign zp_crcspr = nil %}{% assign zp_crcscapr = nil %}{% assign zp_csslpr = nil %}{% assign zp_fmcspr = nil %}{% assign zp_csimg = 'no-image.gif' | img_url: '280x' %}{% assign zp_fmcsslpr = nil %}{% assign zp_fmcscapr = nil %}{% assign zp_fmcsdsctsvam = nil %}{% assign zp_fmcsdsctam = nil %}{% assign zp_csdsctamwsfx = nil %}{% assign zp_uncscls = ' hidden' %}{% assign zp_csunvbdsctcl = ' hidden' %}{% assign zp_uncsqtycls = ' hidden' %}{% assign zp_csupwrprcls = ' hidden' %}{% assign zp_cross_sell_image_data_attrs = nil %}{% assign zp_csvrntcntr = nil %}{% assign zp_csqtycntr = nil %}{% assign zp_csmsgs = nil %}{% assign zp_cross_sell_first_selected_variant = nil %}{% assign zp_current_cross_sell_custom_variants = nil %}{% assign zp_cselid = nil %}{% assign zp_csupblck = nil %}{% assign zp_csuplbl = '' %}{% assign zp_csatnlclscnt = '' %}{% assign zp_csavlbl = false %}{% assign zp_csldmnimg = true %}{% assign zp_csshwqtylbl = true %}{% assign zp_csdftqty = '1' %}{% assign zp_csimgtp = 'product' %}{% assign zp_csdsctdt = '' %}{% assign zp_csshwqty = true %}{% assign zp_cross_sell_view_type = 'crosssellproduct' %}{% assign zp_csprdfnd = false %}{% assign zp_csuntprtginc = false %}{% assign zp_csoptstgs = nil %}{% assign zp_csvrntslctrcls = nil %}{% assign zp_csimglzld = false %}{% assign zp_crvsrc = nil %}{% assign zp_csrvdt = nil %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% assign zp_csshcrlen = false %}{% assign zp_csshcrlid = nil %}{% assign zp_csshcrlmfid = nil %}{% assign zp_csshcrlmdtpl = nil %}{% assign zp_csshcrltmbtpl = nil %}{% assign zp_csshcrlmds = '' %}{% assign zp_csshcrltmb = '' %}{% assign zp_csshcrljsn = '' %}{% assign zp_csvrntjsndt = nil %}{% assign zp_csimgsjsndt = nil %}{% assign zp_csimgsdt = nil %}{%- if zp_product_handle_size > 0 or zp_any_simple_bundle_product_available -%}{% if zp_product_as_current_entity %}{% assign product = zp_current_entity %}{% elsif zp_any_simple_bundle_product_available %}{% assign product = zp_bundle_product %}{% assign zp_main_product_available = false %}{% else %}{% assign product = all_products[zp_product_handle] %}{% endif %}{% assign zp_product_id_size = '' | append: product.id | size %}{% assign zp_product_found = true %}{% if zp_product_id_size < 1 %}{% assign product = nil %}{% assign zp_product_found = false %}{% endif -%}{% if zp_product_found %}{% assign zp_product_title = product.title %}{% assign zp_product_description = product.description %}{% assign zp_prd_qty_icr_tr = 'products.product.quantity.increase' | t: product: product.title %}{% if zp_prd_qty_icr_tr contains 'Translation missing' or zp_prd_qty_icr_tr contains 'translation missing' %}{% assign zp_prd_qty_icr_tr = "Increase quantity" %}{% endif %}{% assign zp_prd_qty_inpt_tr = 'products.product.quantity.input_label' | t: product: product.title %}{% if zp_prd_qty_inpt_tr contains 'Translation missing' or zp_prd_qty_inpt_tr contains 'translation missing' %}{% assign zp_prd_qty_inpt_tr = "Quantity" %}{% endif %}{% assign zp_prd_qty_dcr_tr = 'products.product.quantity.decrease' | t: product: product.title %}{% if zp_prd_qty_dcr_tr contains 'Translation missing' or zp_prd_qty_dcr_tr contains 'translation missing' %}{% assign zp_prd_qty_dcr_tr = "Decrease quantity" %}{% endif %}{% assign zp_prd_qtyaattr = ' name="quantity"' %}{% assign zp_crrpi = '<zplpsbcr_' | append: zp_prd_blkmrkr | append: '>' %}{% if zp_current_entity_content contains zp_crrpi %}{% assign zp_prdlpsbcren = true %}{% capture zp_lpscrwgc %}{% render 'loop-subscriptions', type: 'product-widget', product: product %}{% endcapture %}{% endif %}{% assign zp_aptscrwgc = product | json | escape | prepend: '<div class="appstle_stand_alone_selector" data-product-data="' | append: '"></div>' %}{% assign zp_slscrwgc = product | json | escape | prepend: '<div class="sealsubs-target-element" data-product="' | append: '" data-handle="' | append: product.handle | append: '"></div>' %}{% if zp_pcintrcsbcr %}{% assign zp_rcscrwgc = '<div id="' | append: zp_product_selector | append: '-recharge-wrapper" class="zpa-offset-bottom-xs zpa-recharge-wrapper" data-zp-recharge-product="' | append: product.id | append: '" data-zp-wrapper="' | append: zp_product_selector | append: '"></div>' %}{% endif %}{% endif -%} 
{%- if zp_main_product_available %}{%- capture zp_replace_integration -%}<zp_product_custom_variants_integration></zp_product_custom_variants_integration>{%- endcapture -%}{% assign zp_replace_integration = '' %}{% endif -%}{% if zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_current_entity_native_lazyloading_state = zp_current_entity_metafields['config'].value['native_lzld'] %}{% if zp_current_entity_native_lazyloading_state %}{% assign zp_current_entity_use_native_lazyloading = true %}{% else %}{% assign zp_current_entity_use_native_lazyloading = false %}{% endif %}{% else %}{% assign zp_current_entity_use_native_lazyloading = false %}{% endif %}{% if zp_current_product_custom_variants == blank %}{% assign zp_current_product_custom_variants = product.variants %}{% endif %}{% if zp_selected_variants.size < 1 %}{% assign zp_selected_variants = zp_current_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_use_product_variant_from_url %}{% assign zp_url_selected_variant_id = '' | append: product.selected_variant.id %}{% else %}{% assign zp_url_selected_variant_id = '' %}{% endif %}{% assign zp_filtered_selected_variants = '' %}{% assign zp_first_selected_variant = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_any_product_variant_available = false %}{% assign zp_basic_variant_ids = '' %}{% assign zp_bold_variant_ids = '' %}{% assign zp_product_min_price = nil %}{% assign zp_product_max_price = nil %}{% for zp_prd_variant in zp_current_product_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing %}{% assign zp_basic_variant_ids = zp_basic_variant_ids | append: zp_variant_id | append: ',' %}{% assign zp_bold_variant_id = zp_prd_variant.metafields.shappify_csp['csp_base'] | default: zp_prd_variant.metafields.shappify_qb['qb_parent'] | default: zp_prd_variant.metafields.shappify_bundle['bundle_parent'] | default: 'notassigned' %}{% assign zp_bold_variant_ids = zp_bold_variant_ids | append: zp_bold_variant_id | append: ',' %}{% endif %}{% if zp_use_product_variant_from_url and zp_url_selected_variant_id == zp_variant_id and zp_selected_variants contains zp_url_selected_variant_id %}{% assign zp_first_selected_variant = zp_prd_variant %}{% assign zp_current_selected_variant = zp_prd_variant %}{% endif %}{% if zp_selected_variants contains zp_variant_id %}{% assign zp_filtered_selected_variants = zp_filtered_selected_variants | append: zp_variant_id | append: ',' %}{% if zp_first_selected_variant == nil %}{% assign zp_first_selected_variant = zp_prd_variant %}{% endif %}{% if zp_prd_variant.available %}{% assign zp_any_product_variant_available = true %}{% endif %}{% if zp_product_min_price == blank or zp_product_min_price > zp_prd_variant.price %}{% assign zp_product_min_price = zp_prd_variant.price %}{% endif %}{% if zp_product_max_price == blank or zp_product_max_price < zp_prd_variant.price %}{% assign zp_product_max_price = zp_prd_variant.price %}{% endif %}{% endif %}{% endfor %}{% assign zp_selected_variants = zp_filtered_selected_variants | split: ',' %}{% if zp_selected_variants.size < 1 %}{% assign zp_selected_variants = zp_current_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% assign zp_any_product_variant_available = product.available %}{% if zp_use_product_variant_from_url and zp_selected_variants contains zp_url_selected_variant_id %}{% assign zp_first_selected_variant = product.selected_variant %}{% assign zp_current_selected_variant = product.selected_variant %}{% else %}{% assign zp_first_selected_variant = zp_current_product_custom_variants | first %}{% endif %}{% endif %}{% unless zp_first_selected_variant.available %}{% assign zp_first_available_variant = nil %}{% for zp_prd_variant in zp_current_product_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_selected_variants contains zp_variant_id and zp_prd_variant.available %}{% assign zp_first_available_variant = zp_prd_variant %}{% break %}{% endif %}{% endfor %}{% unless zp_first_available_variant == nil %}{% assign zp_first_selected_variant = zp_first_available_variant %}{% endunless %}{% assign zp_first_available_variant = nil %}{% endunless %}{% assign zp_variant_id = nil %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing and zp_main_product_available %}{% assign zp_basic_variant_ids = zp_basic_variant_ids | split: ',' %}{% assign zp_bold_variant_ids = zp_bold_variant_ids | split: ',' %}{% assign zp_bold_variant_id = nil %}{% assign zp_variant_id = '' | append: zp_first_selected_variant.id %}{% for zp_prd_variant in zp_bold_variant_ids %}{% if zp_variant_id == zp_prd_variant %}{% assign zp_bold_variant_id = zp_basic_variant_ids[forloop.index0] %}{% break %}{% endif %}{% endfor %}{% if zp_bold_variant_id and zp_bold_variant_id != zp_variant_id %}{% assign zp_break_iterator = false %}{% for zp_prd_variant in product.variants %}{% if zp_break_iterator %}{% break %}{% endif %}{% assign zp_prd_variant_id = '' | append: zp_prd_variant.id %}{% if zp_prd_variant_id == zp_bold_variant_id %}{% assign zp_break_iterator = true %}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with zp_prd_variant, hide_action: 'skip' %}{% endif %}{% assign zp_first_selected_variant = zp_prd_variant %}{% break %}{% endif %}{% endfor %}{% endif %}{% endif %}{% assign zp_current_product_price = zp_first_selected_variant.price %}{% if zp_prdimgs_dt != blank %}{% assign zp_img_tps = zp_prdimgs_dt | map: 'tp' %}{% assign zp_umltpimgs = true %}{% else %}{% assign zp_img_tps = zp_product_image_type | split: ',' %}{% assign zp_umltpimgs = false %}{% endif %}{% for zp_img_tp in zp_img_tps %}{% assign zp_product_featured_image = product.featured_image %}{% assign zp_product_default_image = zp_product_featured_image | img_url: 'master' %}{% if zp_product_image_sizes_data == blank or zp_product_image_sizes_data == '' %}{% assign zp_product_image_sizes_data = '1080:--:1080x:|~|:936:--:936x:|~|:774:--:774x:|~|:540:--:540x:|~|:350:--:350x' %}{% endif %}{% assign zp_first_selected_variant_image_id = '' | append: zp_first_selected_variant.image.id | strip %}{% if zp_img_tp == 'variant' and zp_shw_vrntsslctr == true and zp_first_selected_variant_image_id.size > 0 %}{% assign zp_product_featured_image = zp_first_selected_variant.image %}{% endif %}{% assign zp_product_image_srcset_available = true %}{% assign zp_product_image_sizes_data_parts = '' | append: zp_product_image_sizes_data | split: ':|~|:' %}{% assign zp_product_image_src_set_string = '' %}{% assign zp_product_image_sizes_list_string = '' %}{% assign zp_product_image_sizes_json_string = '' %}{% assign zp_current_product_image_size = nil %}{% assign zp_first_image_screen_size = 0 %}{% assign zp_last_image_screen_size = 0 %}{% for zp_image_size_data in zp_product_image_sizes_data_parts %}{% assign zp_image_size_data_parts = '' | append: zp_image_size_data | split: ':--:' %}{% assign zp_image_screen_size = zp_image_size_data_parts[0] %}{% assign zp_image_resize_filter = zp_image_size_data_parts[1] %}{% if forloop.first == true %}{% assign zp_first_image_screen_size = 0 | plus: zp_image_screen_size %}{% elsif forloop.last == true %}{% assign zp_last_image_screen_size = 0 | plus: zp_image_screen_size %}{% endif %}{% if zp_image_screen_size.size > 0 and zp_image_resize_filter.size > 0 %}{% assign zp_product_image_url_with_filter = zp_product_featured_image | img_url: zp_image_resize_filter %}{% assign zp_image_screen_size_width = zp_image_screen_size | append: 'w' %}{% assign zp_product_image_src_set_string = zp_product_image_src_set_string | append: zp_product_image_url_with_filter | append: ' ' | append: zp_image_screen_size_width | append: '__zp1502150400__' %}{% assign zp_product_image_sizes_list_string = zp_product_image_sizes_list_string | append: zp_image_screen_size | append: 'px' | append: '__zp1502150400__' %}{% assign zp_image_screen_size_width_json = zp_image_screen_size_width | json %}{% assign zp_image_resize_filter_json = zp_image_resize_filter | json %}{% assign zp_product_image_sizes_json_string = zp_product_image_sizes_json_string | append: '{"filter":' | append: zp_image_resize_filter_json | append: ',"screen":' | append: zp_image_screen_size_width_json | append: '}' | append: '__zp1502150400__' %}{% unless zp_current_product_image_size %}{% assign zp_current_product_image_size = zp_image_resize_filter %}{% endunless %}{% endif %}{% endfor %}{% unless zp_current_product_image_size %}{% assign zp_current_product_image_size = '1080x' %}{% endunless %}{% assign zp_product_image_src_set = zp_product_image_src_set_string | split: '__zp1502150400__' %}{% assign zp_product_image_sizes_json = zp_product_image_sizes_json_string | split: '__zp1502150400__' %}{% if zp_first_image_screen_size > zp_last_image_screen_size %}{% assign zp_product_image_src_set = zp_product_image_src_set | reverse %}{% assign zp_product_image_sizes_json = zp_product_image_sizes_json | reverse %}{% endif %}{% assign zp_product_image_src_set = zp_product_image_src_set | join: ', ' %}{% assign zp_product_image_sizes_list = zp_product_image_sizes_list_string | split: '__zp1502150400__' | join: ',' %}{% assign zp_product_image_sizes_json = zp_product_image_sizes_json | join: ',' | prepend: '[' | append: ']' %}{% assign zp_product_image = zp_product_featured_image | img_url: zp_current_product_image_size %}{% if zp_product_load_main_image == false %}{% assign zp_product_image = '' %}{% endif %}{% if zp_img_tp == 'custom' %}{% assign zp_product_image_lazy_load_available = false %}{% assign zp_product_image_srcset_available = false %}{% assign zp_product_image_srcset_sizes_available = false %}{% else %}{% assign zp_product_image_lazy_load_available = true %}{% assign zp_product_image_srcset_sizes_available = true %}{% endif %}{% capture zp_product_image_data_attrs %}{% if zp_product_image_lazy_load and zp_current_entity_use_native_lazyloading == false %}{% assign zp_product_image_load_attr_prefix = 'data-' %}{% else %}{% assign zp_product_image_load_attr_prefix = '' %}{% endif %}{% if zp_product_image_lazy_load and zp_product_image_lazy_load_available %} data-lowsrc="{{ zp_product_featured_image | img_url: '540x' }}" width="{{ zp_product_featured_image.width }}" height="{{ zp_product_featured_image.height }}" data-parent-fit="cover" data-aspectratio="16/9" {% if zp_current_entity_use_native_lazyloading %}decoding="async" loading="lazy" src="{{ zp_product_featured_image | img_url: 'original' }}"{% endif %}{% endif %}{% if zp_product_image_srcset_sizes_available %} {% if zp_product_image_lazy_load and zp_product_image_lazy_load_available %}data-sizes="auto" sizes="{{ zp_product_image_sizes_list }}"{% else %}sizes="{{ zp_product_image_sizes_list }}"{% endif %}{% endif %}{% if zp_product_image_srcset_available and zp_product_load_main_image %} {{ zp_product_image_load_attr_prefix }}srcset="{{ zp_product_image_src_set }}"{% endif %} data-zp-product-image data-zp-product-image-type="{{ zp_img_tp }}" data-zp-image-id="{{ zp_product_featured_image.id }}" data-zp-default-image="{{ zp_product_default_image }}"{% endcapture %}{% if zp_umltpimgs %}{% capture zp_img_prp %}zps_mprdimgdt_{{ zp_prd_blkmrkr }}_{{ zp_prdimgs_dt[forloop.index0]['id'] }}_{% endcapture %}{% capture zp_img_alprpn %}zps_imgalt_{{ zp_prd_blkmrkr }}_{{ zp_prdimgs_dt[forloop.index0]['id'] }}_{% endcapture %}{% assign zp_img_alprpv = zp_product_featured_image.alt | strip_html | strip_newlines | escape %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_img_prp, zp_product_image_data_attrs | replace: zp_img_alprpn, zp_img_alprpv %}{% endif %}{% endfor %}{% if zp_product_preload_variant_images %}{% assign zp_prdct_imgldct = '<svg class="hidden" width="215px" height="150px" data-zp-image-loader><use href="#elementLoader"></use></svg>' %}{% endif %}{% if zp_prdct_shcrlenbl or zp_pcrls_dt != blank %}{% if zp_pcrls_dt != blank %}{% assign zp_pcrls_dtl = zp_pcrls_dt %}{% assign zp_pcrls_rstvr = true %}{% else %}{% assign zp_pcrls_dtl = '1' | split: ',' %}{% assign zp_pcrls_rstvr = false %}{% endif %}{% for zp_pcrls_dti in zp_pcrls_dtl %}{% if zp_pcrls_rstvr %}{% assign zp_prd_shcrlid = zp_pcrls_dti['spcid'] %}{% assign zp_prd_shcrlmfid = zp_pcrls_dti['spcpid'] %}{% assign zp_pcrls_srss = '' | append: zp_pcrls_dti['spsrcs'] %}{% assign zp_pcrls_blmkr = zp_prd_blkmrkr | append: '_' | append: zp_prd_shcrlid %}{% else %}{% assign zp_pcrls_blmkr = zp_prd_blkmrkr %}{% endif %}{% capture zp_current_divid_beginning %}<zppcim_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zppcim_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_image_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zppcv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zppcv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_video_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zppcti_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zppcti_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_thumbnail_image_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zppctv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zppctv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_thumbnail_video_template = zp_templates_second_cat[0] %}{% capture zp_prdct_shcrlmdtpl %}<zpctw_{{ zp_pcrls_blmkr }}>{% capture zp_current_divid_beginning %}<zpctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{{ zp_templates_second_cat[0] }}</zpctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_prdct_shcrltmbtpl %}<zpctwt_{{ zp_pcrls_blmkr }}>{% capture zp_current_divid_beginning %}<zpctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{{ zp_templates_second_cat[0] }}</zpctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_prdct_shcrlmds %}{% assign zp_src_sizes_cut = zp_pcrls_srss | split: ',' %}{% if product.media.size > 0 %}{% if zp_first_selected_variant.available and zp_first_selected_variant.featured_media != blank %}{% case zp_first_selected_variant.featured_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_first_selected_variant.featured_media | img_url: '100x100' %}{% assign zp_imgorg = zp_first_selected_variant.featured_media | img_url: 'original' %}{% assign zp_imgalt = zp_first_selected_variant.featured_media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ zp_first_selected_variant.featured_media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', zp_first_selected_variant.featured_media.width| replace: 'zps_medheig', zp_first_selected_variant.featured_media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_first_selected_variant.featured_media | external_video_tag %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_first_selected_variant.featured_media | video_tag: controls: true %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% endcase %}{% endif %}{% for zp_product_media in product.media %}{% if zp_product_media.id == zp_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% case zp_product_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_product_media | img_url: '100x100' %}{% assign zp_imgorg = zp_product_media | img_url: 'original' %}{% assign zp_imgalt = zp_product_media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ zp_product_media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', zp_product_media.width| replace: 'zps_medheig', zp_product_media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_product_media | external_video_tag %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_product_media | video_tag: controls: true %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% endcase %}{% endfor %}{% else %}{% assign zp_imgsml = product.media | img_url: '100x100' %}{% assign zp_imgorg = product.media | img_url: 'original' %}{% assign zp_imgalt = product.media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ product.media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', product.media.width| replace: 'zps_medheig', product.media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% endif %}{% endcapture %}{% capture zp_prdct_shcrltmb %}{% assign zp_media_position = 0 %}{% if product.media.size > 0 %}{% if zp_first_selected_variant.available and zp_first_selected_variant.featured_media != blank %}{% case zp_first_selected_variant.featured_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_first_selected_variant.featured_media | img_url: '100x100' %}{% assign zp_imgalt = zp_first_selected_variant.featured_media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{%when 'video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{% endcase %}{% assign zp_media_position = zp_media_position | plus: 1 %}{% endif %}{% for zp_product_media in product.media %}{% if zp_product_media.id == zp_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% case zp_product_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_product_media | img_url: '100x100' %}{% assign zp_imgalt = zp_product_media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{%when 'video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{% endcase %}{% assign zp_media_position = zp_media_position | plus: 1 %}{% endfor %}{% else %}{% assign zp_imgsml = product.media | img_url: '100x100' %}{% assign zp_imgalt = product.media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% endif %}{% endcapture %}{% capture zp_prdct_shcrljsn %}{% assign zp_open_bracket = "{" %}{% assign zp_close_bracket = "}" %}{% assign zp_need_add_comma = false %}<script type="application/json" data-zp-shopify-carousel="{{ zp_prd_shcrlid }}">{{ zp_open_bracket }}"id":{{ '' | append: zp_prd_shcrlid | json }},"mfid":{{ zp_prd_shcrlmfid | json }},"role":"shopify_carousel","media":[{% if product.media.size > 0 %}{% if zp_first_selected_variant.available and zp_first_selected_variant.featured_media != blank %}{% assign zp_need_add_comma = true %}{{ zp_open_bracket }}{% case zp_first_selected_variant.featured_media.media_type %}{% when 'image' %}"id":"{{ zp_first_selected_variant.featured_media.id }}","type":"image","src":"{{ zp_first_selected_variant.featured_media | img_url: 'original' }}","alt":{{ '' | append: zp_first_selected_variant.featured_media.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_first_selected_variant.featured_media.id }}","type":"video","content":"{{ zp_first_selected_variant.featured_media | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_first_selected_variant.featured_media.id }}","type":"video","content":"{{ zp_first_selected_variant.featured_media | video_tag: controls: true | escape }}"{% endcase %}{{ zp_close_bracket }}{% endif %}{% for zp_product_media in product.media %}{% if zp_product_media.id == zp_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% if zp_need_add_comma %},{% endif %}{{ zp_open_bracket }}{% case zp_product_media.media_type %}{% when 'image' %}"id":"{{ zp_product_media.id }}","type":"image","src":"{{ zp_product_media | img_url: 'original' }}","alt":{{ '' | append: zp_product_media.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_product_media.id }}","type":"video","content":"{{ zp_product_media | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_product_media.id }}","type":"video","content":"{{ zp_product_media | video_tag: controls: true | escape }}"{% endcase %}{{ zp_close_bracket }}{% assign zp_need_add_comma = true %}{% endfor %}{% else %}{{ zp_open_bracket }}"id":"{{ product.media.id }}","type":"image_default","src":"{{ product.media | img_url: 'original' }}","alt":{{ '' | append: product.media.alt | escape | json }}{{ zp_close_bracket }}{% endif %}]{{ zp_close_bracket }}</script>{% endcapture %}{% if zp_prdct_shcrltmbtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_prdct_shcrltmbtpl, zp_prdct_shcrltmb %}{% endif %}{% if zp_prdct_shcrlmdtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_prdct_shcrlmdtpl, zp_prdct_shcrlmds %}{% endif %}{% capture zp_pcrls_blmkr %}<zpprdscj_{{ zp_pcrls_blmkr }}></zpprdscj_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pcrls_blmkr, zp_prdct_shcrljsn %}{% endfor %}{% assign zp_pcrls_dtl = nil %}{% endif %}{% if zp_product_redirect_with_params == nil %}{% assign zp_current_product_redirect_with_params = false %}{% else %}{% assign zp_current_product_redirect_with_params = zp_product_redirect_with_params %}{% endif %}{% assign zp_product_json_integration_content = product | json | default: 'null' %}{% if zp_integrate_with_recharge == false and zp_pcintrcsbcr and zp_rcprewso == false %}<style>[data-zp-add-to-cart-form] .rc-container-wrapper{display:none!important}</style>{% assign zp_rcprewso = true %}{% endif %} 
{%- if zp_main_product_available %}{% capture zp_product_soldout_integrations -%}{% capture zp_replace_integration %}<zp_product_soldout_integration></zp_product_soldout_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_soldout_integration>', '' | replace: '</zp_product_soldout_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% assign zp_prdct_fcstg = zp_product_soldout_integrations %}{% assign zp_product_soldout_integrations = nil %}{% endif -%}{%- if zp_any_product_variant_available -%}{%- if zp_main_product_available %}{% capture zp_product_form_classes_list -%}{% if zp_intgrt_wboldqtbrk %}shapp_qb_prod{% endif %} {{ zp_product_form_classes }} {{ zp_product_form_custom_classes }}{%- endcapture %}{% assign zp_product_form_classes_list = zp_product_form_classes_list | strip %}{% else %}{% assign zp_product_form_classes_list = '' %}{% endif %}{% if zp_use_product_form_action %}{% assign zp_product_form_action_attr = '/cart/add' %}{% else %}{% assign zp_product_form_action_attr = nil %}{% endif %}{% if zp_use_product_form_id %}{% assign zp_product_form_id_default_val = 'zp_product_form_' | append: zp_product_iterator | append: '_' | append: product.id %}{% assign zp_product_form_id_attr = zp_product_form_id_val | default: zp_product_form_id_default_val %}{% else %}{% assign zp_product_form_id_attr = nil %}{% endif %}{% if zp_enable_subscription_widget %}{% assign zp_disable_subscription_widget_attr = nil %}{% else %}{% assign zp_disable_subscription_widget_attr = '' %}{% endif %}{% if zp_prdlpsbcren %}{% assign zp_prdlpsbcrfat = product.id %}{% else %}{% assign zp_prdlpsbcrfat = nil %}{% endif -%}{%- capture zp_prdct_fopntg -%}{%- form 'product', product, id: zp_product_form_id_attr, action: zp_product_form_action_attr, class: zp_product_form_classes_list, data-zp-add-to-cart-form: '', data-zp-link-type: zp_product_link_type, data-productid: product.id, data-zp-redirect-with-url-params: zp_current_product_redirect_with_params, data-zp-disable-subscrptn-wdgt: zp_disable_subscription_widget_attr, data-loop-product-id: zp_prdlpsbcrfat -%}{% if zp_display_shop_pay_widget_by_price_range and zp_product_max_price != blank %}{% if zp_product_max_price < 5000 or zp_product_max_price > 300000 %}{% assign zp_display_shop_pay_widget = false %}{% endif %}{% endif %}{% if zp_display_shop_pay_widget and zp_shw_vrntsslctr and zp_app_integrations contains 'shoppaywidget' %}{% if zp_shop_pay_widget_tag_included %}{% capture zp_prd_fpmtrmcptr %}{{ form | payment_terms }}{% endcapture %}{% else %}<div class="zpa-offset-bottom-sm">{{ form | payment_terms }}</div>{% endif %}{% if zp_prd_fpmtrmcptr.size > 0 %}{% assign zp_unprdct_fptrmscls = '' %}{% endif %}{% endif %}{% assign zp_prdct_fcstg = '</form>' %}{% assign zp_product_form_classes = '' %}{% assign zp_product_form_classes_list = '' %}{% assign zp_unprdct_cls = '' %}{% if zp_shw_vrntsslctr and zp_product_show_quantity %}{% assign zp_unqtycls = '' %}{% else %}{% assign zp_unqtycls = ' hidden' %}{% endif %}{% if zp_shw_vrntsslctr %}{% assign zp_incl_boldsnpts = true %}{% else %}{% assign zp_incl_boldsnpts = false %}{% endif %}{% if zp_incl_boldsnpts and zp_app_integrations contains 'productoptionsbybold' %}{% assign zp_intgrt_wboldprdopts = true %}{% else %}{% assign zp_intgrt_wboldprdopts = false %}{% endif %}{% if zp_incl_boldsnpts and zp_app_integrations contains 'quantitybreaksbybold' %}{% assign zp_intgrt_wboldqtbrk = true %}{% else %}{% assign zp_intgrt_wboldqtbrk = false %}{% endif %}{% if zp_app_integrations contains 'subscriptionsbybold' %}{% assign zp_incl_boldsbsrpns = true %}{% else %}{% assign zp_incl_boldsbsrpns = false %}{% endif %}{% assign zp_product_button_type = 'submit' %}{% capture zp_checkout_button %}{{ form | payment_button }}{% endcapture %}{% if zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_products_static_discounts = zp_current_entity_metafields['config'].value['staticdiscounts'] %}{% else %}{% assign zp_products_static_discounts = zp_current_entity_metafields['config']['staticdiscounts'] %}{% endif %}{% assign zp_current_product_static_discount_data = zp_products_static_discounts[zp_product_element_id] %}{%- if zp_rndr_prdct_frtg and zp_product_content_parts contains zp_opened_cross_sell_tag -%}{% assign zp_product_with_cross_sell_tag = true %}{%- else -%}{% assign zp_product_with_cross_sell_tag = false %}{%- endif -%}{%- if zp_shw_vrntsslctr or zp_bundle_block_enabled -%}{% if zp_rndr_prdct_frmtfld %}{% assign zp_cross_sell_content_parts = zp_current_product_settings['crsslls'] | default: zp_current_product_settings['bndl'] | default: nil %}{% else %}{% assign zp_cross_sell_content_parts = zp_product_content_parts | split: zp_opened_cross_sell_tag %}{% assign zp_product_content_parts = '' %}{% endif %}{% for zp_cross_sell_content_part in zp_cross_sell_content_parts %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_csblkmrkr = zp_cross_sell_content_part | first %}{% assign zp_current_cross_sell_settings = zp_cross_sell_content_part | last %}{% assign zp_cross_sell_content_parts_size = 2 %}{% else %}{% assign zp_cross_sell_content = zp_cross_sell_content_part | append: ' ' | split: zp_closed_cross_sell_tag %}{% assign zp_cross_sell_content_parts_size = zp_cross_sell_content | size %}{% endif %}{% if zp_cross_sell_content_parts_size < 2 %}{% assign zp_product_content_parts = zp_product_content_parts | append: zp_cross_sell_content_part %}{% else %}{% assign zp_cross_sell_product = nil %}{% assign zp_cshndl = '' %}{% assign zp_csslcvrns = '' %}{% assign zp_csslvrnlst = '' %}{% assign zp_csblcid = '' %}{% assign zp_csimgsz = nil %}{% assign zp_csimgszjson = '[]' %}{% assign zp_csshwvrnlbl = nil %}{% assign zp_csvrntslvw = 'vt' %}{% assign zp_csvrntslofscls = nil %}{% assign zp_csdsctam = nil %}{% assign zp_cssvam = nil %}{% assign zp_crcspr = nil %}{% assign zp_crcscapr = nil %}{% assign zp_csslpr = nil %}{% assign zp_fmcspr = nil %}{% assign zp_csimg = 'no-image.gif' | img_url: '280x' %}{% assign zp_fmcsslpr = nil %}{% assign zp_fmcscapr = nil %}{% assign zp_fmcsdsctsvam = nil %}{% assign zp_fmcsdsctam = nil %}{% assign zp_csdsctamwsfx = nil %}{% assign zp_uncscls = ' hidden' %}{% assign zp_csunvbdsctcl = ' hidden' %}{% assign zp_uncsqtycls = ' hidden' %}{% assign zp_csupwrprcls = ' hidden' %}{% assign zp_cross_sell_image_data_attrs = nil %}{% assign zp_csvrntcntr = nil %}{% assign zp_csqtycntr = nil %}{% assign zp_csmsgs = nil %}{% assign zp_cross_sell_first_selected_variant = nil %}{% assign zp_current_cross_sell_custom_variants = nil %}{% assign zp_cselid = nil %}{% assign zp_csupblck = nil %}{% assign zp_csuplbl = '' %}{% assign zp_csatnlclscnt = '' %}{% assign zp_csavlbl = false %}{% assign zp_csldmnimg = true %}{% assign zp_csshwqtylbl = true %}{% assign zp_csdftqty = '1' %}{% assign zp_csimgtp = 'product' %}{% assign zp_csdsctdt = '' %}{% assign zp_csshwqty = true %}{% assign zp_cross_sell_view_type = 'crosssellproduct' %}{% assign zp_csprdfnd = false %}{% assign zp_csuntprtginc = false %}{% assign zp_csoptstgs = nil %}{% assign zp_csvrntslctrcls = nil %}{% assign zp_csimglzld = false %}{% assign zp_crvsrc = nil %}{% assign zp_csrvdt = nil %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% assign zp_csshcrlen = false %}{% assign zp_csshcrlid = nil %}{% assign zp_csshcrlmfid = nil %}{% assign zp_csshcrlmdtpl = nil %}{% assign zp_csshcrltmbtpl = nil %}{% assign zp_csshcrlmds = '' %}{% assign zp_csshcrltmb = '' %}{% assign zp_csshcrljsn = '' %}{% assign zp_csvrntjsndt = nil %}{% assign zp_csimgsjsndt = nil %}{% assign zp_csimgsdt = nil %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_product_settings_keys = zp_current_cross_sell_settings %}{% else %}{% if zp_cross_sell_content[0] contains '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_cross_sell_content[0] = zp_cross_sell_content[0] | remove: '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_display_cross_sell_markup = true %}{% else %}{% assign zp_display_cross_sell_markup = false %}{% endif %}{% assign zp_cross_sell_content_parts = zp_cross_sell_content[0] | append: ' ' | split: '>' %}{% assign zp_product_settings = zp_cross_sell_content_parts[0] %}{% assign zp_product_settings_tmp = zp_product_settings | append: '>' %}{% assign zp_cross_sell_content_parts = zp_cross_sell_content_parts | join: '>' | remove_first: zp_product_settings_tmp %}{% assign zp_product_settings = ' ' | append: zp_product_settings | split: ' data-' %}{% assign zp_product_settings_keys = '' %}{% assign zp_product_settings_values = '' %}{% for zp_product_setting in zp_product_settings %}{% assign zp_product_setting_parts = zp_product_setting | split: '=' %}{% if zp_product_setting_parts.size < 2 %}{% continue %}{% endif %}{% assign zp_prd_stng_k = '' | append: zp_product_setting_parts[0] | strip %}{% if zp_prd_stng_k.size < 1 %}{% continue %}{% endif %}{% assign zp_product_settings_keys = zp_product_settings_keys | append: zp_prd_stng_k | append: '__zp1502150400__' %}{% assign zp_product_setting_size = zp_product_setting | size %}{% assign zp_product_setting_key_size = '' | append: zp_product_setting_parts[0] | size | plus: 1 %}{% assign zp_prd_stng_vl = '' | append: zp_product_setting | slice: zp_product_setting_key_size, zp_product_setting_size | strip %}{% assign zp_product_setting_value_last_index = zp_prd_stng_vl | size | minus: 1 %}{% assign zp_product_setting_value_first_letter = zp_prd_stng_vl | first %}{% if zp_product_setting_value_first_letter == '"' or zp_product_setting_value_first_letter == "'" %}{% assign zp_prd_stng_vl = zp_prd_stng_vl | slice: 1, zp_product_setting_value_last_index %}{% endif %}{% assign zp_product_setting_value_last_index = zp_prd_stng_vl | size | minus: 1 %}{% assign zp_product_setting_value_last_letter = zp_prd_stng_vl | last %}{% if zp_product_setting_value_last_letter == '"' or zp_product_setting_value_last_letter == "'" %}{% assign zp_prd_stng_vl = zp_prd_stng_vl | slice: 0, zp_product_setting_value_last_index %}{% endif %}{% assign zp_product_settings_values = zp_product_settings_values | append: zp_prd_stng_vl | append: '__zp1502150400__' %}{% endfor %}{% assign zp_product_settings_keys = zp_product_settings_keys | split: '__zp1502150400__' %}{% assign zp_product_settings_values = zp_product_settings_values | split: '__zp1502150400__' %}{% assign zp_product_settings = nil %}{% assign zp_product_settings_tmp = nil %}{% assign zp_product_setting_parts = nil %}{% endif %}{% for zp_product_setting_key_data in zp_product_settings_keys %}{% if zp_rndr_prdct_frmtfld %}{% assign zp_prd_stng_k = zp_product_setting_key_data | first %}{% assign zp_unstringified_product_setting_keys = 'srtgs,vrnts,imgs,pcrls' | split: ',' %}{% if zp_unstringified_product_setting_keys contains zp_prd_stng_k %}{% assign zp_prd_stng_vl = zp_product_setting_key_data | last %}{% else %}{% assign zp_prd_stng_vl = zp_product_setting_key_data | last | strip %}{% endif %}{% assign zp_unstringified_product_setting_keys = nil %}{% else %}{% assign zp_prd_stng_k = zp_product_setting_key_data %}{% assign zp_prd_stng_vl = '' | append: zp_product_settings_values[forloop.index0] | strip %}{% endif %}{% case zp_prd_stng_k %}{% when 'handle' %}{% assign zp_cshndl = zp_prd_stng_vl %}{% when 'slctvrnt' %}{% assign zp_csslcvrns = zp_prd_stng_vl %}{% assign zp_csslvrnlst = zp_prd_stng_vl %}{% when 'qty' %}{% assign zp_csdftqty = zp_prd_stng_vl %}{% when 'bid' %}{% assign zp_csblcid = zp_prd_stng_vl %}{% when 'eid' %}{% assign zp_cselid = zp_prd_stng_vl %}{% when 'imgtp' %}{% assign zp_csimgtp = zp_prd_stng_vl %}{% when 'dscntdt' %}{% assign zp_csdsctdt = zp_prd_stng_vl %}{% when 'srtgs' %}{% assign zp_srtg_json_dt = '' %}{% assign zp_srtg_aitm_sprtr = false %}{% for zp_prdct_sttng_val in zp_prd_stng_vl %}{% if zp_prdct_sttng_val['rtgsrc'] != blank %}{% if zp_srtg_aitm_sprtr %}{% assign zp_srtg_itm_sprtr = ',' %}{% else %}{% assign zp_srtg_itm_sprtr = '' %}{% endif %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: zp_srtg_itm_sprtr | append: '{' %}{% assign zp_srtg_aitm_sprtr = true %}{% assign zp_srtg_aitmprp_sprtr = false %}{% for zp_prdct_sttng_nstval in zp_prdct_sttng_val %}{% if zp_srtg_aitmprp_sprtr %}{% assign zp_srtg_itmprp_sprtr = ',' %}{% else %}{% assign zp_srtg_itmprp_sprtr = '' %}{% endif %}{% assign zp_srtg_aitmprp_sprtr = true %}{% assign zp_srtg_snstk = zp_prdct_sttng_nstval | first | json %}{% assign zp_srtg_snstv = zp_prdct_sttng_nstval | last | json %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: zp_srtg_itmprp_sprtr | append: zp_srtg_snstk | append: ':' | append: zp_srtg_snstv %}{% endfor %}{% assign zp_srtg_json_dt = zp_srtg_json_dt | append: '}' %}{% endif %}{% endfor %}{% assign zp_csrvdt = '[' | append: zp_srtg_json_dt | append: ']' %}{% when 'rtgsrc' %}{% assign zp_crvsrc = zp_prd_stng_vl %}{% when 'vrntsv' %}{% assign zp_csvrntslvw = zp_prd_stng_vl %}{% when 'vtp' %}{% assign zp_cross_sell_view_type = zp_prd_stng_vl %}{% when 'optst' %}{% assign zp_csoptstgs = zp_prd_stng_vl %}{% when 'vrntcls' %}{% assign zp_csvrntslctrcls = zp_prd_stng_vl | url_escape %}{% when 'vrntoffcls' %}{% assign zp_csvrntslofscls = zp_prd_stng_vl | url_escape %}{% when 'shwqty' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_csshwqty = false %}{% endif %}{% when 'mimgld' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_csldmnimg = false %}{% endif %}{% when 'shwqtylb' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_csshwqtylbl = false %}{% endif %}{% when 'shwvrntlb' %}{% if zp_prd_stng_vl == 'false' or zp_prd_stng_vl == '0' %}{% assign zp_csshwvrnlbl = false %}{% else %}{% assign zp_csshwvrnlbl = true %}{% endif %}{% when 'unprcincl' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_csuntprtginc = true %}{% endif %}{% when 'lzld' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_csimglzld = true %}{% endif %}{% when 'spcen' %}{% if zp_prd_stng_vl == 'true' or zp_prd_stng_vl == '1' %}{% assign zp_csshcrlen = true %}{% endif %}{% when 'spcid' %}{% assign zp_csshcrlid = zp_prd_stng_vl %}{% when 'spcpid' %}{% assign zp_csshcrlmfid = zp_prd_stng_vl %}{% when 'vrnts' %}{% assign zp_csvrntjsndt = zp_prd_stng_vl | json %}{% when 'imgs' %}{% assign zp_csimgsjsndt = zp_prd_stng_vl | json %}{% assign zp_csimgsdt = zp_prd_stng_vl %}{% when 'pcrls' %}{% assign zp_cscrls_dt = zp_prd_stng_vl %}{% endcase %}{% endfor %}{% if zp_rndr_prdct_frtg and zp_csoptstgs != empty %}{% assign zp_csoptstgs = zp_csoptstgs | replace: '&quot;', '"' %}{% endif %}{% if zp_cshndl.size > 0 %}{% assign zp_cross_sell_product = all_products[zp_cshndl] %}{% assign zp_cross_sell_id = '' | append: zp_cross_sell_product.id %}{% if zp_cross_sell_id.size > 0 %}{% assign zp_csprdfnd = true %}{% assign zp_cross_sell_product_title = zp_cross_sell_product.title %}{% assign zp_cross_sell_product_description = zp_cross_sell_product.description %}{% assign zp_cs_qty_icr_tr = 'products.product.quantity.increase' | t: product: zp_cross_sell_product.title %}{% if zp_cs_qty_icr_tr contains 'Translation missing' or zp_cs_qty_icr_tr contains 'translation missing' %}{% assign zp_cs_qty_icr_tr = "Increase quantity" %}{% endif %}{% assign zp_cs_qty_inpt_tr = 'products.product.quantity.input_label' | t: product: zp_cross_sell_product.title %}{% if zp_cs_qty_inpt_tr contains 'Translation missing' or zp_cs_qty_inpt_tr contains 'translation missing' %}{% assign zp_cs_qty_inpt_tr = "Quantity" %}{% endif %}{% assign zp_cs_qty_dcr_tr = 'products.product.quantity.decrease' | t: product: zp_cross_sell_product.title %}{% if zp_cs_qty_dcr_tr contains 'Translation missing' or zp_cs_qty_dcr_tr contains 'translation missing' %}{% assign zp_cs_qty_dcr_tr = "Decrease quantity" %}{% endif %}{% if zp_current_cross_sell_custom_variants == blank %}{% assign zp_current_cross_sell_custom_variants = zp_cross_sell_product.variants %}{% endif %}{% if zp_csslcvrns.size < 1 %}{% assign zp_csslcvrns = zp_current_cross_sell_custom_variants | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_cross_sell_use_product_variant_from_url %}{% assign zp_url_selected_variant_id = '' | append: zp_cross_sell_product.selected_variant.id %}{% else %}{% assign zp_url_selected_variant_id = '' %}{% endif %}{% assign zp_filtered_selected_variants = '' %}{% assign zp_cross_sell_first_selected_variant = nil %}{% assign zp_cross_sell_current_selected_variant = nil %}{% assign zp_any_cross_sell_variant_available = false %}{% assign zp_basic_variant_ids = '' %}{% assign zp_bold_variant_ids = '' %}{% assign zp_product_min_price = nil %}{% assign zp_product_max_price = nil %}{% for zp_prd_variant in zp_current_cross_sell_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing %}{% assign zp_basic_variant_ids = zp_basic_variant_ids | append: zp_variant_id | append: ',' %}{% assign zp_bold_variant_id = zp_prd_variant.metafields.shappify_csp['csp_base'] | default: zp_prd_variant.metafields.shappify_qb['qb_parent'] | default: zp_prd_variant.metafields.shappify_bundle['bundle_parent'] | default: 'notassigned' %}{% assign zp_bold_variant_ids = zp_bold_variant_ids | append: zp_bold_variant_id | append: ',' %}{% endif %}{% if zp_cross_sell_use_product_variant_from_url and zp_url_selected_variant_id == zp_variant_id and zp_csslcvrns contains zp_url_selected_variant_id %}{% assign zp_cross_sell_first_selected_variant = zp_prd_variant %}{% assign zp_cross_sell_current_selected_variant = zp_prd_variant %}{% endif %}{% if zp_csslcvrns contains zp_variant_id %}{% assign zp_filtered_selected_variants = zp_filtered_selected_variants | append: zp_variant_id | append: ',' %}{% if zp_cross_sell_first_selected_variant == nil %}{% assign zp_cross_sell_first_selected_variant = zp_prd_variant %}{% endif %}{% if zp_prd_variant.available %}{% assign zp_any_cross_sell_variant_available = true %}{% endif %}{% if zp_product_min_price == blank or zp_product_min_price > zp_prd_variant.price %}{% assign zp_product_min_price = zp_prd_variant.price %}{% endif %}{% if zp_product_max_price == blank or zp_product_max_price < zp_prd_variant.price %}{% assign zp_product_max_price = zp_prd_variant.price %}{% endif %}{% endif %}{% endfor %}{% assign zp_csslcvrns = zp_filtered_selected_variants | split: ',' %}{% if zp_csslcvrns.size < 1 %}{% assign zp_csslcvrns = zp_current_cross_sell_custom_variants | map: 'id' | join: ',' | split: ',' %}{% assign zp_any_cross_sell_variant_available = zp_cross_sell_product.available %}{% if zp_cross_sell_use_product_variant_from_url and zp_csslcvrns contains zp_url_selected_variant_id %}{% assign zp_cross_sell_first_selected_variant = zp_cross_sell_product.selected_variant %}{% assign zp_cross_sell_current_selected_variant = zp_cross_sell_product.selected_variant %}{% else %}{% assign zp_cross_sell_first_selected_variant = zp_current_cross_sell_custom_variants | first %}{% endif %}{% endif %}{% unless zp_cross_sell_first_selected_variant.available %}{% assign zp_cross_sell_first_available_variant = nil %}{% for zp_prd_variant in zp_current_cross_sell_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% if zp_csslcvrns contains zp_variant_id and zp_prd_variant.available %}{% assign zp_cross_sell_first_available_variant = zp_prd_variant %}{% break %}{% endif %}{% endfor %}{% unless zp_cross_sell_first_available_variant == nil %}{% assign zp_cross_sell_first_selected_variant = zp_cross_sell_first_available_variant %}{% endunless %}{% assign zp_cross_sell_first_available_variant = nil %}{% endunless %}{% assign zp_variant_id = nil %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing%}{% assign zp_basic_variant_ids = zp_basic_variant_ids | split: ',' %}{% assign zp_bold_variant_ids = zp_bold_variant_ids | split: ',' %}{% assign zp_bold_variant_id = nil %}{% assign zp_variant_id = '' | append: zp_cross_sell_first_selected_variant.id %}{% for zp_prd_variant in zp_bold_variant_ids %}{% if zp_variant_id == zp_prd_variant %}{% assign zp_bold_variant_id = zp_basic_variant_ids[forloop.index0] %}{% break %}{% endif %}{% endfor %}{% if zp_bold_variant_id and zp_bold_variant_id != zp_variant_id %}{% assign zp_break_iterator = false %}{% for zp_prd_variant in zp_cross_sell_product.variants %}{% if zp_break_iterator %}{% break %}{% endif %}{% assign zp_prd_variant_id = '' | append: zp_prd_variant.id %}{% if zp_prd_variant_id == zp_bold_variant_id %}{% assign zp_break_iterator = true %}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with zp_prd_variant, hide_action: 'skip' %}{% endif %}{% assign zp_cross_sell_first_selected_variant = zp_prd_variant %}{% break %}{% endif %}{% endfor %}{% endif %}{% endif %}{% assign zp_crcspr = zp_cross_sell_first_selected_variant.price %}{% if zp_csshcrlen or zp_cscrls_dt != blank %}{% if zp_cscrls_dt != blank %}{% assign zp_pcrls_dtl = zp_cscrls_dt %}{% assign zp_pcrls_rstvr = true %}{% else %}{% assign zp_pcrls_dtl = '1' | split: ',' %}{% assign zp_pcrls_rstvr = false %}{% endif %}{% for zp_pcrls_dti in zp_pcrls_dtl %}{% if zp_pcrls_rstvr %}{% assign zp_csshcrlid = zp_pcrls_dti['spcid'] %}{% assign zp_csshcrlmfid = zp_pcrls_dti['spcpid'] %}{% assign zp_pcrls_srss = '' | append: zp_pcrls_dti['spsrcs'] %}{% assign zp_pcrls_blmkr = zp_csblkmrkr | append: '_' | append: zp_csshcrlid %}{% else %}{% assign zp_pcrls_blmkr = zp_csblkmrkr %}{% endif %}{% capture zp_current_divid_beginning %}<zpcspcim_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcspcim_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_image_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zpcspcv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcspcv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_video_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zpcspcti_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcspcti_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_thumbnail_image_template = zp_templates_second_cat[0] %}{% capture zp_current_divid_beginning %}<zpcspctv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcspctv_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{% assign zp_product_shopify_carousel_thumbnail_video_template = zp_templates_second_cat[0] %}{% capture zp_csshcrlmdtpl %}<zpcsctw_{{ zp_pcrls_blmkr }}>{% capture zp_current_divid_beginning %}<zpcsctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcsctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{{ zp_templates_second_cat[0] }}</zpcsctw_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_csshcrltmbtpl %}<zpcsctwt_{{ zp_pcrls_blmkr }}>{% capture zp_current_divid_beginning %}<zpcsctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_current_divid_end %}</zpcsctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_templates_first_cat = zp_current_entity_content | split: zp_current_divid_beginning %}{% assign zp_templates_second_cat = zp_templates_first_cat[1] | split: zp_current_divid_end %}{{ zp_templates_second_cat[0] }}</zpcsctwt_{{ zp_pcrls_blmkr }}>{% endcapture %}{% capture zp_csshcrlmds %}{% assign zp_src_sizes_cut = zp_pcrls_srss | split: ',' %}{% if zp_cross_sell_product.media.size > 0 %}{% if zp_cross_sell_first_selected_variant.available and zp_cross_sell_first_selected_variant.featured_media != blank %}{% case zp_cross_sell_first_selected_variant.featured_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_cross_sell_first_selected_variant.featured_media | img_url: '100x100' %}{% assign zp_imgorg = zp_cross_sell_first_selected_variant.featured_media | img_url: 'original' %}{% assign zp_imgalt = zp_cross_sell_first_selected_variant.featured_media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ zp_cross_sell_first_selected_variant.featured_media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', zp_cross_sell_first_selected_variant.featured_media.width| replace: 'zps_medheig', zp_cross_sell_first_selected_variant.featured_media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_cross_sell_first_selected_variant.featured_media | external_video_tag %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_cross_sell_first_selected_variant.featured_media | video_tag: controls: true %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% endcase %}{% endif %}{% for zp_product_media in zp_cross_sell_product.media %}{% if zp_product_media.id == zp_cross_sell_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% case zp_product_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_product_media | img_url: '100x100' %}{% assign zp_imgorg = zp_product_media | img_url: 'original' %}{% assign zp_imgalt = zp_product_media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ zp_product_media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', zp_product_media.width| replace: 'zps_medheig', zp_product_media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_product_media | external_video_tag %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_product_media | video_tag: controls: true %}{{ zp_product_shopify_carousel_video_template | replace: 'zps_medvid', video }}{% endcase %}{% endfor %}{% else %}{% assign zp_imgsml = zp_cross_sell_product.media | img_url: '100x100' %}{% assign zp_imgorg = zp_cross_sell_product.media | img_url: 'original' %}{% assign zp_imgalt = zp_cross_sell_product.media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_src_sizes_cut %}{{ zp_cross_sell_product.media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_product_shopify_carousel_image_template | replace: 'zps_medwid', zp_cross_sell_product.media.width| replace: 'zps_medheig', zp_cross_sell_product.media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% endif %}{% endcapture %}{% capture zp_csshcrltmb %}{% assign zp_media_position = 0 %}{% if zp_cross_sell_product.media.size > 0 %}{% if zp_cross_sell_first_selected_variant.available and zp_cross_sell_first_selected_variant.featured_media != blank %}{% case zp_cross_sell_first_selected_variant.featured_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_cross_sell_first_selected_variant.featured_media | img_url: '100x100' %}{% assign zp_imgalt = zp_cross_sell_first_selected_variant.featured_media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{%when 'video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{% endcase %}{% assign zp_media_position = zp_media_position | plus: 1 %}{% endif %}{% for zp_product_media in zp_cross_sell_product.media %}{% if zp_product_media.id == zp_cross_sell_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% case zp_product_media.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_product_media | img_url: '100x100' %}{% assign zp_imgalt = zp_product_media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{%when 'video' %}{{ zp_product_shopify_carousel_thumbnail_video_template | replace: 'zps_medpos', zp_media_position }}{% endcase %}{% assign zp_media_position = zp_media_position | plus: 1 %}{% endfor %}{% else %}{% assign zp_imgsml = zp_cross_sell_product.media | img_url: '100x100' %}{% assign zp_imgalt = zp_cross_sell_product.media.alt | escape %}{{ zp_product_shopify_carousel_thumbnail_image_template | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_media_position | replace: 'zps_medalt', zp_imgalt }}{% endif %}{% endcapture %}{% capture zp_csshcrljsn %}{% assign zp_open_bracket = "{" %}{% assign zp_close_bracket = "}" %}{% assign zp_need_add_comma = false %}<script type="application/json" data-zp-shopify-carousel="{{ zp_csshcrlid }}">{{ zp_open_bracket }}"id":{{ '' | append: zp_csshcrlid | json }},"mfid":{{ zp_csshcrlmfid | json }},"role":"shopify_carousel","media":[{% if zp_cross_sell_product.media.size > 0 %}{% if zp_cross_sell_first_selected_variant.available and zp_cross_sell_first_selected_variant.featured_media != blank %}{% assign zp_need_add_comma = true %}{{ zp_open_bracket }}{% case zp_cross_sell_first_selected_variant.featured_media.media_type %}{% when 'image' %}"id":"{{ zp_cross_sell_first_selected_variant.featured_media.id }}","type":"image","src":"{{ zp_cross_sell_first_selected_variant.featured_media | img_url: 'original' }}","alt":{{ '' | append: zp_cross_sell_first_selected_variant.featured_media.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_cross_sell_first_selected_variant.featured_media.id }}","type":"video","content":"{{ zp_cross_sell_first_selected_variant.featured_media | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_cross_sell_first_selected_variant.featured_media.id }}","type":"video","content":"{{ zp_cross_sell_first_selected_variant.featured_media | video_tag: controls: true | escape }}"{% endcase %}{{ zp_close_bracket }}{% endif %}{% for zp_product_media in zp_cross_sell_product.media %}{% if zp_product_media.id == zp_cross_sell_first_selected_variant.featured_media.id %}{% continue %}{% endif %}{% if zp_need_add_comma %},{% endif %}{{ zp_open_bracket }}{% case zp_product_media.media_type %}{% when 'image' %}"id":"{{ zp_product_media.id }}","type":"image","src":"{{ zp_product_media | img_url: 'original' }}","alt":{{ '' | append: zp_product_media.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_product_media.id }}","type":"video","content":"{{ zp_product_media | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_product_media.id }}","type":"video","content":"{{ zp_product_media | video_tag: controls: true | escape }}"{% endcase %}{{ zp_close_bracket }}{% assign zp_need_add_comma = true %}{% endfor %}{% else %}{{ zp_open_bracket }}"id":"{{ zp_cross_sell_product.media.id }}","type":"image_default","src":"{{ zp_cross_sell_product.media | img_url: 'original' }}","alt":{{ '' | append: zp_cross_sell_product.media.alt | escape | json }}{{ zp_close_bracket }}{% endif %}]{{ zp_close_bracket }}</script>{% endcapture %}{% if zp_csshcrltmbtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_csshcrltmbtpl, zp_csshcrltmb %}{% endif %}{% if zp_csshcrlmdtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_csshcrlmdtpl, zp_csshcrlmds %}{% endif %}{% capture zp_pcrls_blmkr %}<zpcsscj_{{ zp_pcrls_blmkr }}></zpcsscj_{{ zp_pcrls_blmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pcrls_blmkr, zp_csshcrljsn %}{% endfor %}{% assign zp_pcrls_dtl = nil %}{% endif %}{% if zp_any_cross_sell_variant_available %}{% assign zp_csavlbl = true %}{% assign zp_uncscls = '' %}{% assign zp_csunvbdsctcl = '' %}{% assign zp_available_cross_sell_products_count = zp_available_cross_sell_products_count | plus: 1 %}{% if zp_csimgsdt != blank %}{% assign zp_img_tps = zp_csimgsdt | map: 'tp' %}{% assign zp_umltpimgs = true %}{% else %}{% assign zp_img_tps = zp_csimgtp | split: ',' %}{% assign zp_umltpimgs = false %}{% endif %}{% for zp_img_tp in zp_img_tps %}{% assign zp_cross_sell_featured_image = zp_cross_sell_product.featured_image %}{% assign zp_cross_sell_default_image = zp_cross_sell_featured_image | img_url: 'master' %}{% assign zp_first_selected_variant_image_id = '' | append: zp_cross_sell_first_selected_variant.image.id | strip %}{% if zp_img_tp == 'variant' and zp_shw_vrntsslctr == true and zp_first_selected_variant_image_id.size > 0 %}{% assign zp_cross_sell_featured_image = zp_cross_sell_first_selected_variant.image %}{% endif %}{% assign zp_cross_sell_image_srcset_available = true %}{% assign zp_cross_sell_image_sizes_data = '1080:--:280x' %}{% assign zp_product_image_sizes_data_parts = '' | append: zp_cross_sell_image_sizes_data | split: ':|~|:' %}{% assign zp_product_image_src_set_string = '' %}{% assign zp_product_image_sizes_list_string = '' %}{% assign zp_product_image_sizes_json_string = '' %}{% assign zp_csimgsz = nil %}{% assign zp_first_image_screen_size = 0 %}{% assign zp_last_image_screen_size = 0 %}{% for zp_image_size_data in zp_product_image_sizes_data_parts %}{% assign zp_image_size_data_parts = '' | append: zp_image_size_data | split: ':--:' %}{% assign zp_image_screen_size = zp_image_size_data_parts[0] %}{% assign zp_image_resize_filter = zp_image_size_data_parts[1] %}{% if forloop.first == true %}{% assign zp_first_image_screen_size = 0 | plus: zp_image_screen_size %}{% elsif forloop.last == true %}{% assign zp_last_image_screen_size = 0 | plus: zp_image_screen_size %}{% endif %}{% if zp_image_screen_size.size > 0 and zp_image_resize_filter.size > 0 %}{% assign zp_product_image_url_with_filter = zp_cross_sell_featured_image | img_url: zp_image_resize_filter %}{% assign zp_image_screen_size_width = zp_image_screen_size | append: 'w' %}{% assign zp_product_image_src_set_string = zp_product_image_src_set_string | append: zp_product_image_url_with_filter | append: ' ' | append: zp_image_screen_size_width | append: '__zp1502150400__' %}{% assign zp_product_image_sizes_list_string = zp_product_image_sizes_list_string | append: zp_image_screen_size | append: 'px' | append: '__zp1502150400__' %}{% assign zp_image_screen_size_width_json = zp_image_screen_size_width | json %}{% assign zp_image_resize_filter_json = zp_image_resize_filter | json %}{% assign zp_product_image_sizes_json_string = zp_product_image_sizes_json_string | append: '{"filter":' | append: zp_image_resize_filter_json | append: ',"screen":' | append: zp_image_screen_size_width_json | append: '}' | append: '__zp1502150400__' %}{% unless zp_csimgsz %}{% assign zp_csimgsz = zp_image_resize_filter %}{% endunless %}{% endif %}{% endfor %}{% unless zp_csimgsz %}{% assign zp_csimgsz = '1080x' %}{% endunless %}{% assign zp_cross_sell_image_src_set = zp_product_image_src_set_string | split: '__zp1502150400__' %}{% assign zp_csimgszjson = zp_product_image_sizes_json_string | split: '__zp1502150400__' %}{% if zp_first_image_screen_size > zp_last_image_screen_size %}{% assign zp_cross_sell_image_src_set = zp_cross_sell_image_src_set | reverse %}{% assign zp_csimgszjson = zp_csimgszjson | reverse %}{% endif %}{% assign zp_cross_sell_image_src_set = zp_cross_sell_image_src_set | join: ', ' %}{% assign zp_cross_sell_image_sizes_list = zp_product_image_sizes_list_string | split: '__zp1502150400__' | join: ',' %}{% assign zp_csimgszjson = zp_csimgszjson | join: ',' | prepend: '[' | append: ']' %}{% assign zp_csimg = zp_cross_sell_featured_image | img_url: zp_csimgsz %}{% if zp_img_tp == 'custom' %}{% assign zp_cross_sell_image_lazy_load_available = false %}{% assign zp_cross_sell_image_srcset_available = false %}{% assign zp_cross_sell_image_srcset_sizes_available = false %}{% else %}{% assign zp_cross_sell_image_lazy_load_available = true %}{% assign zp_cross_sell_image_srcset_sizes_available = true %}{% endif %}{% capture zp_cross_sell_image_data_attrs %}{% if zp_csimglzld and zp_current_entity_use_native_lazyloading == false %}{% assign zp_product_image_load_attr_prefix = 'data-' %}{% else %}{% assign zp_product_image_load_attr_prefix = '' %}{% endif %}{% if zp_csimglzld and zp_cross_sell_image_lazy_load_available %} data-lowsrc="{{ zp_cross_sell_featured_image | img_url: '280x' }}" width="{{ zp_cross_sell_featured_image.width }}" height="{{ zp_cross_sell_featured_image.height }}" data-parent-fit="cover" data-aspectratio="16/9" {% if zp_current_entity_use_native_lazyloading %}decoding="async" loading="lazy" src="{{ zp_cross_sell_featured_image | img_url: 'original' }}"{% endif %}{% endif %}{% if zp_cross_sell_image_srcset_sizes_available %} {% if zp_csimglzld and zp_cross_sell_image_lazy_load_available %}data-sizes="auto" sizes="{{ zp_cross_sell_image_sizes_list }}"{% else %}sizes="{{ zp_cross_sell_image_sizes_list }}"{% endif %}{% endif %}{% if zp_cross_sell_image_srcset_available and zp_csldmnimg %} {{ zp_product_image_load_attr_prefix }}srcset="{{ zp_cross_sell_image_src_set }}"{% endif %} data-zp-{% if zp_bundle_block_enabled %}bundle-product{% else %}cross-sell{% endif %}-image data-zp-{% if zp_bundle_block_enabled %}bundle-product{% else %}cross-sell{% endif %}-image-type="{{ zp_img_tp }}" data-zp-image-id="{{ zp_cross_sell_featured_image.id }}" data-zp-default-image="{{ zp_cross_sell_default_image }}"{% endcapture %}{% if zp_umltpimgs %}{% capture zp_img_prp %}zps_mcsimgdt_{{ zp_csblkmrkr }}_{{ zp_csimgsdt[forloop.index0]['id'] }}_{% endcapture %}{% capture zp_img_alprpn %}zps_csimgalt_{{ zp_csblkmrkr }}_{{ zp_csimgsdt[forloop.index0]['id'] }}_{% endcapture %}{% assign zp_img_alprpv = zp_cross_sell_featured_image.alt | strip_html | strip_newlines | escape %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_img_prp, zp_cross_sell_image_data_attrs | replace: zp_img_alprpn, zp_img_alprpv %}{% endif %}{% endfor %}{% if zp_cross_sell_first_selected_variant.compare_at_price > zp_cross_sell_first_selected_variant.price %}{% assign zp_crcscapr = zp_cross_sell_first_selected_variant.compare_at_price %}{% else %}{% assign zp_crcscapr = nil %}{% endif %}{% assign zp_csdsctam_recalculate = true %}{% assign zp_csdsctam_money = false %}{% assign zp_csdsctam_prefix = '' %}{% assign zp_csdsctam_suffix = '' %}{% if zp_csdsctdt contains ':' %}{% assign zp_csdsctdt = zp_csdsctdt | split: ':' %}{% assign zp_split_discount_data = true %}{% else %}{% assign zp_split_discount_data = false %}{% endif %}{% if zp_csdsctdt.size > 1 %}{% assign zp_csdsctam = 0 | plus: zp_csdsctdt[0] | abs %}{% assign zp_product_discount_type = '' | append: zp_csdsctdt[1] %}{% if zp_product_discount_type == 'percentage' or zp_product_discount_type == 'percentage_dynamic' %}{% assign zp_product_discount_amount_parts = '' | append: zp_csdsctam | split: '.' %}{% assign zp_product_discount_decimal_part = '' | append: zp_product_discount_amount_parts[1] | default: '0' %}{% assign zp_product_discount_decimal_part = 0 | plus: zp_product_discount_decimal_part %}{% unless zp_product_discount_decimal_part > 0 %}{% assign zp_csdsctam = zp_product_discount_amount_parts[0] %}{% endunless %}{% assign zp_csdsctam = 0 | plus: zp_csdsctam | at_most: 100 %}{% assign zp_cssvam = zp_crcspr | times: zp_csdsctam | divided_by: 100 | at_most: zp_crcspr %}{% assign zp_csdsctam_recalculate = false %}{% assign zp_csdsctam_suffix = '%' %}{% elsif zp_product_discount_type == 'compare_price' %}{% if zp_crcscapr %}{% assign zp_csdsctam = zp_crcscapr | minus: zp_crcspr %}{% else %}{% assign zp_csdsctam = 0 %}{% assign zp_csunvbdsctcl = 'hidden' %}{% endif %}{% assign zp_cssvam = zp_csdsctam %}{% else %}{% assign zp_csdsctam = zp_csdsctam | times: 100 %}{% assign zp_csdsctam = '' | append: zp_csdsctam | split: '.' | first | default: 0 %}{% assign zp_csdsctam = 0 | plus: zp_csdsctam | at_most: zp_crcspr %}{% assign zp_cssvam = zp_csdsctam %}{% assign zp_csdsctam_money = true %}{% endif %}{% if zp_product_discount_type == 'compare_price' %}{% assign zp_csslpr = zp_crcspr %}{% else %}{% assign zp_csslpr = zp_crcspr | minus: zp_cssvam %}{% endif %}{% assign zp_csdsctam_prefix = '-' %}{% else %}{% assign zp_csslpr = zp_crcspr %}{% assign zp_csunvbdsctcl = 'hidden' %}{% assign zp_csdsctam = 0 %}{% endif %}{% if zp_split_discount_data %}{% assign zp_csdsctdt = zp_csdsctdt | join: ':' %}{% endif %}{% if zp_product_calculate_bundle_price %}{% assign zp_crcspr = zp_crcspr | times: zp_csdftqty %}{% if zp_crcscapr %}{% assign zp_crcscapr = zp_crcscapr | times: zp_csdftqty %}{% endif %}{% assign zp_csslpr = zp_csslpr | times: zp_csdftqty %}{% if zp_cssvam %}{% assign zp_cssvam = zp_cssvam | times: zp_csdftqty %}{% endif %}{% if zp_csdsctam_recalculate %}{% assign zp_csdsctam = zp_csdsctam | times: zp_csdftqty %}{% endif %}{% endif %}{% assign zp_fmcspr = zp_crcspr | money %}{% assign zp_fmcscapr = zp_crcscapr | money %}{% assign zp_fmcsslpr = zp_csslpr | money %}{% if zp_csdsctam_money %}{% assign zp_fmcsdsctam = zp_csdsctam | money %}{% else %}{% assign zp_fmcsdsctam = zp_csdsctam %}{% endif %}{% assign zp_csdsctamwsfx = zp_fmcsdsctam | append: zp_csdsctam_suffix %}{% assign zp_fmcsdsctam = zp_fmcsdsctam | prepend: zp_csdsctam_prefix | append: zp_csdsctam_suffix %}{% if zp_cssvam %}{% assign zp_fmcsdsctsvam = zp_cssvam | money %}{% endif %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_atc_field_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_atc_field_attr = 'cross-sell' %}{% endif %}{% capture zp_csvrntcntr %}{% if zp_shw_vrntsslctr %}<select id="{{ zp_cross_sell_selector }}" class="hidden noreplace" data-productid="{{ zp_cross_sell_product.id }}" data-zp-{{ zp_cross_sell_atc_field_attr }}-field="id">{% assign zp_first_selected_variant_id = '' | append: zp_cross_sell_first_selected_variant.id %}{% for zp_cross_sell_variant in zp_current_cross_sell_custom_variants %}{% assign zp_variant_id = '' | append: zp_cross_sell_variant.id %}{% unless zp_csslcvrns contains zp_variant_id %}{% continue %}{% endunless %}{% if zp_cross_sell_product.has_only_default_variant %}{% assign zp_cross_sell_variant_name = zp_cross_sell_product.title %}{% else %}{% assign zp_cross_sell_variant_name = zp_cross_sell_product.title | append: ' - ' | append: zp_cross_sell_variant.title %}{% endif %}{% if zp_cross_sell_variant.available %}{% if zp_first_selected_variant_id == zp_variant_id %}{% assign zp_option_selected_attr = 'selected="selected" ' %}{% else %}{% assign zp_option_selected_attr = '' %}{% endif %}<option {{ zp_option_selected_attr }}value="{{ zp_cross_sell_variant.id }}" data-zp-var-name="{{ zp_cross_sell_variant_name | escape }}">{{ zp_cross_sell_variant.title }} - {{ zp_cross_sell_variant.price | money_with_currency }}</option>{% else %}<option disabled="disabled" value="{{ zp_cross_sell_variant.id }}" data-zp-var-name="{{ zp_cross_sell_variant_name | escape }}">{{ zp_cross_sell_variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option>{% endif %}{% endfor %}</select>{% endif %}{% endcapture %}{% if zp_unit_price_enabled %}{% if zp_csuntprtginc %}{% if zp_cross_sell_first_selected_variant.unit_price_measurement %}{% assign zp_csupwrprcls = '' %}{% else %}{% assign zp_csupwrprcls = ' hidden' %}{% endif %}{% capture zp_csuplbl %}{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}{% endcapture %}{% capture zp_csupblck %}<span data-zp-cross-sell-unit-price>{% if zp_cross_sell_first_selected_variant.unit_price_measurement %}{{ zp_cross_sell_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-cross-sell-up-base-unit>{% if zp_cross_sell_first_selected_variant.unit_price_measurement %}{% if zp_cross_sell_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_cross_sell_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_cross_sell_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span>{% endcapture %}{% else %}{% capture zp_csupblck %}{% if zp_unit_price_enabled %}<div class="zpa-offset-bottom-xs{% unless zp_cross_sell_first_selected_variant.unit_price_measurement %} hidden{% endunless %}" data-zp-cross-sell-unit-price-wrapper><span data-zp-cross-sell-unit-price>{% if zp_cross_sell_first_selected_variant.unit_price_measurement %}{{ zp_cross_sell_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-cross-sell-up-base-unit>{% if zp_cross_sell_first_selected_variant.unit_price_measurement %}{% if zp_cross_sell_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_cross_sell_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_cross_sell_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span></div>{% endif %}{% endcapture %}{% assign zp_csvrntcntr = zp_csupblck | append: zp_csvrntcntr %}{% endif %}{% endif %}{% if zp_csshwqty %}{% assign zp_uncsqtycls = '' %}{% else %}{% assign zp_uncsqtycls = 'hidden' %}{% endif %}{% capture zp_csqtycntr %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_quantity_field_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_quantity_field_attr = 'cross-sell' %}{% endif %}{% if zp_csshwqty %}{% unless zp_csshwqtylbl == false %}<label for="{{ zp_cross_sell_selector }}-quantity">{% assign zp_translation = 'products.product.quantity.label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %}<div class="zpa-quantity-block" data-zp-{{ zp_cross_sell_quantity_field_attr }}-quantity-el data-product-wrapper-id="{{ zp_cselid }}"><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.decrease' | t: product: zp_cross_sell_product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Decrease quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_cross_sell_quantity_field_attr }}-decrease-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use></svg></button><input id="{{ zp_cross_sell_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_csdftqty }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" title="{% assign zp_translation = 'products.product.quantity.input_label' | t: product: zp_cross_sell_product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_cross_sell_quantity_field_attr }}-quantity data-zp-{{ zp_cross_sell_quantity_field_attr }}-field="quantity"><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.increase' | t: product: zp_cross_sell_product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Increase quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_cross_sell_quantity_field_attr }}-increase-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use></svg></button></div>{% else %}<input id="{{ zp_cross_sell_selector }}-quantity" type="hidden" value="{{ zp_csdftqty }}" data-zp-{{ zp_cross_sell_quantity_field_attr }}-quantity data-zp-{{ zp_cross_sell_quantity_field_attr }}-field="quantity">{% endif %}{% endcapture %}{% capture zp_csmsgs %}{% if zp_cross_sell_first_selected_variant.available %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_cross_sell_atc_field_attr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs hidden"></div>{% else %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_cross_sell_atc_field_attr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endif %}{% if zp_shw_vrntsslctr %}<div class="zpa-product-message-wrap"><span class="zpa-product-message zpa-{% if zp_bundle_block_enabled %}bundle-product{% else %}cross-sell-product{% endif %}--message hidden" data-zp-{{ zp_cross_sell_atc_field_attr }}-messages data-zp-success-message="{{ zp_product_add_to_cart_msg }}"></span></div>{% endif %}{% endcapture %}{% else %}{% capture zp_csmsgs %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_cross_sell_atc_field_attr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endcapture %}{% endif %}{% capture zp_cross_sell_json_integration_content %}{% if zp_intgrt_wboldqtbrk %}{% capture zp_product_json %}{% include 'bold-product', product: zp_cross_sell_product, output: 'json' %}{% endcapture %}{% if zp_product_json contains 'Could not find asset ' %}{{ zp_cross_sell_product | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = nil %}{% else %}{{ zp_cross_sell_product | json | default: 'null' }}{% endif %}{% endcapture %}{% capture zp_cross_sell_config_part %}{"product":{{ zp_cross_sell_json_integration_content }}{% if zp_csslvrnlst != '' %},"selectedVariants":"{{ zp_csslvrnlst | url_escape }}"{% endif %},"discountData":"{{ zp_csdsctdt }}","selector":"{{ zp_cross_sell_selector }}","available":{{ zp_csavlbl }},"blockId":"{{ zp_csblcid | default: '' }}","elementId":"{{ zp_cselid | default: '' }}","imageSize":"{{ '' | append: zp_csimgsz | strip | default: 'master' | url_escape }}","imageSrcSetData":{{ zp_csimgszjson }}{% if zp_csshwvrnlbl != nil %},"showVariantLabel":"{{ zp_csshwvrnlbl }}"{% endif %}{% if zp_csvrntjsndt == blank %},"variantSelectorView":"{{ zp_csvrntslvw }}"{% endif %}{% if zp_csvrntjsndt != blank %},"variantSelectors":{{ zp_csvrntjsndt }}{% endif %}{% if zp_csimgsdt != blank %},"images":{{ zp_csimgsjsndt }}{% endif %},"defaultQty":{{ 0 | plus: zp_csdftqty }}{% if zp_csoptstgs != blank %},"optionsSettings":{{ zp_csoptstgs }}{% endif %}{% if zp_csvrntslctrcls != blank %},"variantLabelClasses":"zp {{ zp_csvrntslctrcls }}"{% endif %}{% if zp_csvrntslofscls != blank %},"variantOffsetClasses":"{{ zp_csvrntslofscls }}"{% endif %}{% if zp_crvsrc != blank %},"reviewsSource":{{ zp_crvsrc | json }}{% endif %}{% if zp_csrvdt != blank %},"starRatings":{{ zp_csrvdt }}{% endif %} }{% endcapture %}{% if zp_cross_sell_config.size > 1 %}{% assign zp_cross_sell_config_parts_separator = ',' %}{% else %}{% assign zp_cross_sell_config_parts_separator = '' %}{% endif %}{% assign zp_cross_sell_config = '' | append: zp_cross_sell_config | append: zp_cross_sell_config_parts_separator | append: zp_cross_sell_config_part %}{% assign zp_cross_sell_config_part = nil %}{% else %}{% assign zp_cross_sell_product = nil %}{% capture zp_csmsgs %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_cross_sell_atc_field_attr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation }}</div>{% endcapture %}{% endif %}{% if zp_current_cross_sell_settings contains 'srtgs' %}{% assign zp_rvws_srcs = zp_current_cross_sell_settings['srtgs'] | map: 'rtgsrc' | uniq %}{% assign zp_cptr_rplc_src = true %}{% else %}{% assign zp_rvws_srcs = zp_current_cross_sell_settings['rtgsrc'] | split: ' ' %}{% assign zp_cptr_rplc_src = false %}{% endif %}{% for zp_rvs_src in zp_rvws_srcs %}{% if zp_rvs_src == blank %}{% continue %}{% endif %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% if zp_cross_sell_product.id > 0 %}{% case zp_rvs_src %}{% when 'yotpo' %}{% assign zp_prd_rvwdt = zp_cross_sell_product.metafields.yotpo %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prd_rvwdt.reviews_average %}{% assign zp_csrvcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% endif %}{% when 'loox' %}{% assign zp_prd_rvwdt = zp_cross_sell_product.metafields.loox %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.num_reviews %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prd_rvwdt.avg_rating %}{% assign zp_csrvcnt = 0 | plus: zp_prd_rvwdt.num_reviews %}{% endif %}{% when 'spr' %}{% assign zp_prd_rvwdt = zp_cross_sell_product.metafields.spr.reviews %}{% if zp_prd_rvwdt %}{% assign zp_prd_rvwdt = ' ' | append: zp_prd_rvwdt | append: ' ' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"ratingValue":' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890.' | split: '' %}{% assign zp_csrvrtg = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_csrvrtg = zp_csrvrtg | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvrtg = 0 | plus: zp_csrvrtg %}{% unless zp_csrvrtg > 0 %}{% assign zp_csrvrtg = nil %}{% endunless %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"reviewCount":' %}{% if zp_prd_rvw_rtgdt.size < 2 %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"ratingCount":' %}{% endif %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890' | split: '' %}{% assign zp_csrvcnt = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_csrvcnt = zp_csrvcnt | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvcnt = 0 | plus: zp_csrvcnt %}{% unless zp_csrvcnt > 0 %}{% assign zp_csrvcnt = nil %}{% endunless %}{% endif %}{% when 'opinew' %}{% assign zp_prd_rvwdt = zp_cross_sell_product.metafields.opinew_metafields %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prd_rvwdt.reviews_average %}{% assign zp_csrvcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% endif %}{% when 'judgeme' %}{% assign zp_prd_rvwdt = zp_cross_sell_product.metafields.judgeme.badge %}{% if zp_prd_rvwdt %}{% assign zp_prd_rvwdt = ' ' | append: zp_prd_rvwdt | append: ' ' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: ' data-average-rating=' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890.' | split: '' %}{% assign zp_csrvrtg = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_csrvrtg = zp_csrvrtg | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvrtg = 0 | plus: zp_csrvrtg %}{% unless zp_csrvrtg > 0 %}{% assign zp_csrvrtg = nil %}{% endunless %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: ' data-number-of-reviews=' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890' | split: '' %}{% assign zp_csrvcnt = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_csrvcnt = zp_csrvcnt | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvcnt = 0 | plus: zp_csrvcnt %}{% unless zp_csrvcnt > 0 %}{% assign zp_csrvcnt = nil %}{% endunless %}{% endif %}{% endcase %}{% endif %}{% assign zp_prd_rvwdt = nil %}{% assign zp_prd_rvw_rtgdt = nil %}{% assign zp_prd_rvwcnt = nil %}{% if zp_csrvcnt != empty and zp_csrvcnt > 0 %}{% assign zp_csrvwrpcl = '' %}{% else %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% endif %}{% if zp_cptr_rplc_src %}{% assign zp_rvws_mrkr = zp_csblkmrkr | append: '_' | append: zp_rvs_src %}{% else %}{% assign zp_rvws_mrkr = zp_csblkmrkr %}{% endif %}{% if zp_csrvrtg != empty and zp_csrvrtg > 0 %}{% assign zp_csrvrtngtxt = '' | append: zp_csrvrtg %}{% if zp_csrvrtngtxt contains '.' %}{% assign zp_prd_rvw_rtgdt = zp_csrvrtg | split: '.' %}{% if zp_prd_rvw_rtgdt[1].size > 1 %}{% assign zp_prd_rtg_dtdcmls = '' | append: zp_prd_rvw_rtgdt[1] | split: '' %}{% assign zp_csrvrtngtxt = zp_prd_rvw_rtgdt[0] | append: '.' | append: zp_prd_rtg_dtdcmls[0] %}{% endif %}{% assign zp_prd_rvw_rtgdt = nil %}{% assign zp_prd_rtg_dtdcmls = nil %}{% else %}{% assign zp_csrvrtngtxt = zp_csrvrtngtxt | append: '.0' %}{% endif %}{% assign zp_prd_rvw_tmprtng = zp_csrvrtg %}{% for zp_itrtr_idx in (1..5) %}{% if zp_prd_rvw_tmprtng > 0 and zp_prd_rvw_tmprtng <= 0.5 %}{% assign zp_cross_sell_rating_star_classes = 'zpa-star-half' %}{% elsif zp_prd_rvw_tmprtng > 0.5 %}{% assign zp_cross_sell_rating_star_classes = 'zpa-star-full' %}{% else %}{% assign zp_cross_sell_rating_star_classes = '' %}{% endif %}{% assign zp_prd_rtg_sitrtr = 'zps_rvic_' | append: zp_itrtr_idx %}{% assign zp_prd_rvw_tmprtng = zp_prd_rvw_tmprtng | minus: 1 %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_crrpi %}zps_rvic_{{ zp_itrtr_idx }}_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_rating_star_classes %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_prd_rtg_sitrtr, zp_cross_sell_rating_star_classes %}{% endif %}{% endfor %}{% else %}{% for zp_itrtr_idx in (1..5) %}{% assign zp_prd_rtg_sitrtr = 'zps_rvic_' | append: zp_itrtr_idx %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_crrpi %}zps_rvic_{{ zp_itrtr_idx }}_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, "" %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_prd_rtg_sitrtr, "" %}{% endif %}{% endfor %}{% endif %}{% capture zp_crrpi %}<zpcsrvavg_{{ zp_rvws_mrkr }}></zpcsrvavg_{{ zp_rvws_mrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csrvrtngtxt %}{% capture zp_crrpi %}<zpcsrvcnt_{{ zp_rvws_mrkr }}></zpcsrvcnt_{{ zp_rvws_mrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csrvcnt %}{% capture zp_crrpi %}zps_csunvavlblrv_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csrvwrpcl %}{% endfor %}{% endif %}{% unless zp_csprdfnd %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_empty_wrapper_selector %}{% endunless %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_cross_sell_variants_tag_name %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_cross_sell_variants_tag_name %}{% assign zp_csatnlclscnt = zp_csatnlclscnt | append: zp_csvrntcntr %}{% endunless %}{% capture zp_cross_sell_quantity_tag_name %}<zpcsqtyctrl_{{ zp_csblkmrkr }}></zpcsqtyctrl_{{ zp_csblkmrkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_cross_sell_quantity_tag_name %}{% assign zp_csatnlclscnt = zp_csatnlclscnt | append: zp_csqtycntr %}{% endunless %}{% if zp_csatnlclscnt.size > 0 %}{% assign zp_csatnlclscnt = '<div style="display:none!important">' | append: zp_csatnlclscnt | append: '</div>' %}{% endif %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_wrapper_selector %}{% capture zp_crrpi %}zps_csimgsrc_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csimg %}{% capture zp_crrpi %}<zpcsslprc_{{ zp_csblkmrkr }}></zpcsslprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsslpr %}{% capture zp_crrpi %}<zpprscst_{{ zp_csblkmrkr }}></zpprscst_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_title %}{% capture zp_crrpi %}<zpprscsdes_{{ zp_csblkmrkr }}></zpprscsdes_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_description %}{% capture zp_crrpi %}<zpcsprc_{{ zp_csblkmrkr }}></zpcsprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcspr %}{% capture zp_crrpi %}<zpcscompareprc_{{ zp_csblkmrkr }}></zpcscompareprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcscapr %}{% capture zp_crrpi %}<zpcssvdprc_{{ zp_csblkmrkr }}></zpcssvdprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctsvam %}{% capture zp_crrpi %}<zpcsdcsamnt_{{ zp_csblkmrkr }}></zpcsdcsamnt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctam %}{% capture zp_crrpi %}<zpcsildcs_{{ zp_csblkmrkr }}></zpcsildcs_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csdsctamwsfx %}{% capture zp_crrpi %}zps_csunvavlblprdcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncscls %}{% capture zp_crrpi %}zps_csunavlbldccl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csunvbdsctcl %}{% capture zp_crrpi %}zps_csimgdattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_image_data_attrs %}{% capture zp_crrpi %}zps_csunvavlblqtycl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncsqtycls %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_csvrntcntr %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsqtyctrl_{{ zp_csblkmrkr }}></zpcsqtyctrl_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csqtycntr %}{% capture zp_crrpi %}<zpcspmsg_{{ zp_csblkmrkr }}></zpcspmsg_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csmsgs %}{% capture zp_crrpi %}<zpcsunprc_{{ zp_csblkmrkr }}></zpcsunprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupblck %}{% capture zp_crrpi %}<zpcsunplb_{{ zp_csblkmrkr }}></zpcsunplb_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csuplbl %}{% capture zp_crrpi %}zps_unvavlblcsunp_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupwrprcls %}{% capture zp_crrpi %}zps_unvavlblbndilcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unbndl_piwrcls %}{% capture zp_crrpi %}<zpcsaccc_{{ zp_csblkmrkr }}></zpcsaccc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csatnlclscnt %}{% capture zp_crrpi %}zps_qtyicrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_icr_tr %}{% capture zp_crrpi %}zps_qtyinttl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_inpt_tr %}{% capture zp_crrpi %}zps_qtydcrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_dcr_tr %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% else %}{% assign zp_cross_sell_content_parts = zp_cross_sell_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndl_piwrcls %}{% assign zp_product_content_parts = zp_product_content_parts | append: zp_cross_sell_content_parts | append: zp_cross_sell_content[1] %}{% endif %}{% endif %}{% endfor %}{% if zp_available_cross_sell_products_count > 0 %}{% assign zp_uncs_wrprcls = '' %}{% endif %}{% if zp_cross_sell_config.size > 0 %}{% assign zp_cross_sell_config = '[' | append: zp_cross_sell_config | append: ']' %}{% if zp_bundle_block_enabled %}{% assign zp_bndl_blkcnfg = zp_current_product_settings['bndlc'] | default: nil | json %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: ',"bundleConfig":{"rules":' %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: zp_bndl_blkcnfg %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: ',"hash":' %}{% assign zp_bndl_blkcnfg = zp_current_product_settings['bndlce'] | default: nil | json %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: zp_bndl_blkcnfg %}{% if zp_current_product_settings['bndlel'] != blank %}{% for zp_bndl_elmcnfgprt in zp_current_product_settings['bndlel'] %}{% assign zp_bndl_elmsttngs = zp_bndl_elmcnfgprt | last %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: ',"' | append: zp_bndl_elmsttngs['t'] | append: '":' %}{% if zp_bndl_elmsttngs['t'] == 'title' %}{% assign zp_bndl_blkcnfg = zp_bndl_elmsttngs['dt'] | default: product.title | strip_html | strip_newlines | strip %}{% else %}{% assign zp_bndl_blkcnfg = zp_bndl_elmsttngs['dt'] %}{% endif %}{% assign zp_bndl_blkcnfg = zp_bndl_blkcnfg | default: nil | json %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: zp_bndl_blkcnfg %}{% endfor %}{% else %}{% assign zp_bndl_blkcnfg = zp_current_product_settings['bndlttl'] | default: product.title | strip_html | strip_newlines | strip | json %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: ',"title":' | append: zp_bndl_blkcnfg %}{% endif %}{% assign zp_add_prdct_intstngs = zp_add_prdct_intstngs | append: '}' %}{% assign zp_bndl_blkcnfg = nil %}{% endif %}{% endif %}{%- else -%}{%- if zp_rndr_prdct_frmtfld -%}{% assign zp_cross_sell_content_parts = zp_current_product_settings['crsslls'] | default: zp_current_product_settings['bndl'] | default: nil %}{% for zp_cross_sell_content_part in zp_cross_sell_content_parts %}{% assign zp_csblkmrkr = zp_cross_sell_content_part | first %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_empty_wrapper_selector %}{% capture zp_crrpi %}<zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '<div style="display:none!important">' %}{% capture zp_crrpi %}</zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '</div>' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_wrapper_selector %}{% capture zp_crrpi %}zps_csimgsrc_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csimg %}{% capture zp_crrpi %}<zpcsslprc_{{ zp_csblkmrkr }}></zpcsslprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsslpr %}{% capture zp_crrpi %}<zpprscst_{{ zp_csblkmrkr }}></zpprscst_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_title %}{% capture zp_crrpi %}<zpprscsdes_{{ zp_csblkmrkr }}></zpprscsdes_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_description %}{% capture zp_crrpi %}<zpcsprc_{{ zp_csblkmrkr }}></zpcsprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcspr %}{% capture zp_crrpi %}<zpcscompareprc_{{ zp_csblkmrkr }}></zpcscompareprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcscapr %}{% capture zp_crrpi %}<zpcssvdprc_{{ zp_csblkmrkr }}></zpcssvdprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctsvam %}{% capture zp_crrpi %}<zpcsdcsamnt_{{ zp_csblkmrkr }}></zpcsdcsamnt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctam %}{% capture zp_crrpi %}<zpcsildcs_{{ zp_csblkmrkr }}></zpcsildcs_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csdsctamwsfx %}{% capture zp_crrpi %}zps_csunvavlblprdcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncscls %}{% capture zp_crrpi %}zps_csunavlbldccl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csunvbdsctcl %}{% capture zp_crrpi %}zps_csimgdattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_image_data_attrs %}{% capture zp_crrpi %}zps_csunvavlblqtycl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncsqtycls %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_csvrntcntr %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsqtyctrl_{{ zp_csblkmrkr }}></zpcsqtyctrl_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csqtycntr %}{% capture zp_crrpi %}<zpcspmsg_{{ zp_csblkmrkr }}></zpcspmsg_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csmsgs %}{% capture zp_crrpi %}<zpcsunprc_{{ zp_csblkmrkr }}></zpcsunprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupblck %}{% capture zp_crrpi %}<zpcsunplb_{{ zp_csblkmrkr }}></zpcsunplb_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csuplbl %}{% capture zp_crrpi %}zps_unvavlblcsunp_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupwrprcls %}{% capture zp_crrpi %}zps_unvavlblbndilcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unbndl_piwrcls %}{% capture zp_crrpi %}<zpcsaccc_{{ zp_csblkmrkr }}></zpcsaccc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csatnlclscnt %}{% capture zp_crrpi %}zps_qtyicrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_icr_tr %}{% capture zp_crrpi %}zps_qtyinttl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_inpt_tr %}{% capture zp_crrpi %}zps_qtydcrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_dcr_tr %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% endfor %}{%- elsif zp_product_with_cross_sell_tag -%}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_empty_wrapper_selector | replace: zp_opened_cross_sell_tag, '<div style="display:none!important" ' | replace: zp_closed_cross_sell_tag, '</div>' | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndl_piwrcls %}{%- endif -%}{%- endif -%} 
{%- capture zp_additional_property_integration_content -%}{% capture zp_replace_integration %}<zp_additional_property_integration></zp_additional_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_property_integration>', '' | replace: '</zp_additional_property_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{% if zp_integrate_with_recharge and zp_enable_subscription_widget and zp_pcintrcsbcr == false %}{% assign zp_recharge_wrapper_content = '<div id="' | append: zp_product_selector | append: '-recharge-wrapper" class="zpa-offset-bottom-xs zpa-recharge-wrapper" data-zp-recharge-product="' | append: product.id | append: '" data-zp-wrapper="' | append: zp_product_selector | append: '"></div>' %}{% assign zp_additional_property_integration_content = zp_additional_property_integration_content | prepend: zp_recharge_wrapper_content %}{% endif %} 
{%- if zp_main_product_available -%}{%- capture zp_variant_integration_content -%}{% capture zp_replace_integration %}<zp_variant_integration></zp_variant_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_variant_integration>', '' | replace: '</zp_variant_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_variant_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_property_integration_content -%}{% if zp_incl_boldsbsrpns %}{% include 'bsub-widget' %}{% endif %}{% if zp_intgrt_wboldprdopts %}<div class="bold_options" data-product-id="{{ product.id }}"></div>{% endif %}{% capture zp_replace_integration %}<zp_property_integration></zp_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_property_integration>', '' | replace: '</zp_property_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_property_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_product_json_integration_content -%}{% capture zp_replace_integration %}<zp_product_json_integration>{% if zp_intgrt_wboldqtbrk %}{% capture zp_product_json %}{% include 'bold-product', product: product, output: 'json' %}{% endcapture %}{% if zp_product_json contains 'Could not find asset ' %}{{ product | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = nil %}{% else %}{{ product | json | default: 'null' }}{% endif %}</zp_product_json_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_json_integration>', '' | replace: '</zp_product_json_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_product_json_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_product_footer_integration_content -%}{% capture zp_replace_integration %}<zp_product_footer_integration></zp_product_footer_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_footer_integration>', '' | replace: '</zp_product_footer_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_product_footer_integration_content = '' %}{%- endif -%}{%- if zp_main_product_available %}{% capture zp_prdct_vrntctnr %}{% if zp_shw_vrntsslctr %}{% if zp_prd_vrntsslctr_wrpr_cls_enbld %}<div class="{{ zp_prd_vrntsslctr_wrpr_cls }}">{% endif %}{{ zp_additional_property_integration_content }}<select class="hidden noreplace" id="{{ zp_product_selector }}" name="id" data-productid="{{ product.id }}" aria-hidden="true">{% assign zp_first_selected_variant_id = '' | append: zp_first_selected_variant.id %}{% for variant in zp_current_product_custom_variants %}{% assign zp_variant_id = '' | append: variant.id %}{% unless zp_selected_variants contains zp_variant_id %}{% continue %}{% endunless %}{{ zp_variant_integration_content }}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with variant, hide_action: 'skip' %}{% endif %}{% if variant.available %}{% if zp_first_selected_variant_id == zp_variant_id %}{% assign zp_option_selected_attr = 'selected="selected" ' %}{% else %}{% assign zp_option_selected_attr = '' %}{% endif %}<option {{ zp_option_selected_attr }}value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>{% else %}<option disabled="disabled" value="{{ variant.id }}">{{ variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option>{% endif %}{% endfor %}</select>{{ zp_property_integration_content }}{% if zp_prd_vrntsslctr_wrpr_cls_enbld %}</div>{% endif %}{% endif %}{% endcapture %}{% endif -%}{%- capture zp_prdct_qtyctnr -%}{% if zp_shw_vrntsslctr %}{% if zp_product_show_quantity %}{% unless zp_product_show_quantity_label == false %}<label class="{% if zp_prd_vrntsslctr_vw == 'hz' %}{{ 'zpa-buybox__label zpa-offset-right-sm zpa-buybox__label zp' | append: zp_product_quantity_selector_label_classes | strip }}{% else %}{{ 'zp' | append: zp_product_quantity_selector_label_classes | strip }}{% endif %}" for="{{ zp_product_selector }}-quantity">{% assign zp_translation = 'products.product.quantity.label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %}<div class="{% if zp_prd_vrntsslctr_vw == 'hz' %}zpa-quantity-block{% else %}zpa-quantity-block{% endif %}" data-product-wrapper-id="{{ zp_product_element_id }}" data-zp-quantity-el><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.decrease' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Decrease quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-decrease-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use></svg></button><input id="{{ zp_product_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_product_default_quantity }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" name="quantity" title="{% assign zp_translation = 'products.product.quantity.input_label' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-quantity><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.increase' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Increase quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-increase-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use></svg></button></div>{% else %}<input id="{{ zp_product_selector }}-quantity" type="hidden" name="quantity" value="{{ zp_product_default_quantity }}" data-zp-product-quantity>{% endif %}{% endif %}{%- endcapture -%}{% capture zp_prdct_qtytgn %}zps_qtyattr_{{ zp_prd_blkmrkr }}{% endcapture %}{% if zp_current_entity_content contains zp_prdct_qtytgn %}{% assign zp_prdct_qtyctnr = zp_prdct_qtyctnr | remove: ' name="quantity"' | remove: ' required ' %}{% endif %} 
{%- if zp_main_product_available %}{% capture zp_prdct_btnintgrtns -%}{%- if zp_intgrt_wboldqtbrk %}<div class="shappify-qty-msg">{{ bold_selected_or_first_available_variant.metafields.shappify_qb.pricing_html }}</div>{% endif -%}{% capture zp_replace_integration %}<zp_product_info_integration></zp_product_info_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_info_integration>', '' | replace: '</zp_product_info_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% else %}{% assign zp_prdct_btnintgrtns = '' %}{% endif -%}{%- capture zp_prdct_btnmsgs -%}{% if zp_shw_vrntsslctr %}<div class="{{ 'zpa-product-message__wrapper ' | append: zp_product_message_wrapper_classes | strip }}"><span class="{{ 'zpa-product-message hidden product-success zp ' | append: zp_product_add_to_cart_classes | strip }}" data-zp-product-messages data-zp-success-message="{{ zp_product_add_to_cart_msg }}"></span></div>{% endif %}{%- endcapture -%}
{%- if zp_main_product_available %}{% capture zp_product_additional_integrations -%}{% if zp_intgrt_wboldprdopts %}{% assign zp_incl_boldcmnsnpt = true %}<script>window.BOLD.common.Shopify.saveProduct({{ product.handle | json }},{{ product.id | json }},{{ product | json }});{% for variant in product.variants %}{% assign csp_metafield_namespace = variant.id | prepend: "csp" %}window.BOLD.common.Shopify.saveVariant({{ variant.id | json }},{variant:{{ variant | json }},inventory_quantity:{{ variant.inventory_quantity | json }},product_id:{{ product.id | json }},product_handle:{{ product.handle | json }},price:{{ variant.price | json }},variant_title:{{ variant.title | json }},group_id:"{{ variant.metafields.bold_rp.rp_group_id }}",csp_metafield:{{ product.metafields[csp_metafield_namespace] | json }}});{% endfor %}</script>{% endif %}{% if zp_intgrt_wboldqtbrk == true %}{% include "bold-product" with product, hide_action: "break" %}{% if bold_hidden_product %}{% break %}{% endif %}{% endif %}{% capture zp_replace_integration %}<zp_additional_integration></zp_additional_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_integration>', '' | replace: '</zp_additional_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% else %}{% assign zp_product_additional_integrations = '' %}{% endif -%}{% if zp_first_selected_variant.compare_at_price > zp_first_selected_variant.price %}{% assign zp_current_product_compare_at_price = zp_first_selected_variant.compare_at_price %}{% else %}{% assign zp_current_product_compare_at_price = nil %}{% endif %}{% assign zp_product_discount_amount_recalculate = true %}{% assign zp_product_discount_amount_money = false %}{% assign zp_product_discount_amount_prefix = '' %}{% assign zp_product_discount_amount_suffix = '' %}{% if zp_product_discount_data contains ':' %}{% assign zp_product_discount_data = zp_product_discount_data | split: ':' %}{% assign zp_split_discount_data = true %}{% else %}{% assign zp_split_discount_data = false %}{% endif %}{% if zp_product_discount_data.size > 1 %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_data[0] | abs %}{% assign zp_product_discount_type = '' | append: zp_product_discount_data[1] %}{% if zp_product_discount_type == 'percentage' or zp_product_discount_type == 'percentage_dynamic' %}{% assign zp_product_discount_amount_parts = '' | append: zp_product_discount_amount | split: '.' %}{% assign zp_product_discount_decimal_part = '' | append: zp_product_discount_amount_parts[1] | default: '0' %}{% assign zp_product_discount_decimal_part = 0 | plus: zp_product_discount_decimal_part %}{% unless zp_product_discount_decimal_part > 0 %}{% assign zp_product_discount_amount = zp_product_discount_amount_parts[0] %}{% endunless %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_amount | at_most: 100 %}{% assign zp_product_saved_amount = zp_current_product_price | times: zp_product_discount_amount | divided_by: 100 | at_most: zp_current_product_price %}{% assign zp_product_discount_amount_recalculate = false %}{% assign zp_product_discount_amount_suffix = '%' %}{% assign zp_percentage_discount_diff_wrapper_class = '' %}{% elsif zp_product_discount_type == 'compare_price' %}{% if zp_current_product_compare_at_price %}{% assign zp_product_discount_amount = zp_current_product_compare_at_price | minus: zp_current_product_price %}{% else %}{% assign zp_product_discount_amount = 0 %}{% assign zp_unavailable_discount_class = 'hidden' %}{% endif %}{% assign zp_product_saved_amount = zp_product_discount_amount %}{% else %}{% assign zp_product_discount_amount = zp_product_discount_amount | times: 100 %}{% assign zp_product_discount_amount = '' | append: zp_product_discount_amount | split: '.' | first | default: 0 %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_amount | at_most: zp_current_product_price %}{% assign zp_product_saved_amount = zp_product_discount_amount %}{% assign zp_product_discount_amount_money = true %}{% endif %}{% if zp_product_discount_type == 'compare_price' %}{% assign zp_product_sale_price = zp_current_product_price %}{% else %}{% assign zp_product_sale_price = zp_current_product_price | minus: zp_product_saved_amount %}{% endif %}{% assign zp_product_discount_amount_prefix = '-' %}{% else %}{% assign zp_product_sale_price = zp_current_product_price %}{% assign zp_unavailable_discount_class = 'hidden' %}{% assign zp_product_discount_amount = 0 %}{% endif %}{% if zp_split_discount_data %}{% assign zp_product_discount_data = zp_product_discount_data | join: ':' %}{% endif %}{% if zp_product_calculate_bundle_price %}{% assign zp_current_product_price = zp_current_product_price | times: zp_product_default_quantity %}{% if zp_current_product_compare_at_price %}{% assign zp_current_product_compare_at_price = zp_current_product_compare_at_price | times: zp_product_default_quantity %}{% endif %}{% assign zp_product_sale_price = zp_product_sale_price | times: zp_product_default_quantity %}{% if zp_product_saved_amount %}{% assign zp_product_saved_amount = zp_product_saved_amount | times: zp_product_default_quantity %}{% endif %}{% if zp_product_discount_amount_recalculate %}{% assign zp_product_discount_amount = zp_product_discount_amount | times: zp_product_default_quantity %}{% endif %}{% endif %}{% if zp_use_compare_price_as_retail and zp_product_discount_type == 'compare_price' %}{% assign zp_formatted_product_compare_at_price = zp_current_product_compare_at_price | money %}{% assign zp_formatted_product_price = zp_formatted_product_compare_at_price %}{% else %}{% assign zp_formatted_product_price = zp_current_product_price | money %}{% assign zp_formatted_product_compare_at_price = zp_current_product_compare_at_price | money %}{% endif %}{% assign zp_formatted_product_sale_price = zp_product_sale_price | money %}{% if zp_product_discount_amount_money %}{% assign zp_formatted_product_discount_amount = zp_product_discount_amount | money %}{% else %}{% assign zp_formatted_product_discount_amount = zp_product_discount_amount %}{% endif %}{% assign zp_product_discount_amount_with_suffix = zp_formatted_product_discount_amount | append: zp_product_discount_amount_suffix %}{% assign zp_formatted_product_discount_amount = zp_formatted_product_discount_amount | prepend: zp_product_discount_amount_prefix | append: zp_product_discount_amount_suffix %}{% if zp_product_saved_amount %}{% assign zp_formatted_product_saved_amount = zp_product_saved_amount | money %}{% endif %}{% if zp_current_product_static_discount_data != blank %}{% if zp_current_product_static_discount_data['only_cross_sell'] %}{% if zp_bundle_block_enabled %}{% assign zp_prdct_dscntfldnattr = 'data-zp-bundle-product-discount-field' %}{% else %}{% assign zp_prdct_dscntfldnattr = 'data-zp-cross-sell-discount-field' %}{% endif %}{% assign zp_prdct_dscntfldnattr = zp_prdct_dscntfldnattr | append: ' data-zp-name' %}{% else %}{% assign zp_prdct_dscntfldnattr = 'name' %}{% endif %}{% assign zp_crnt_prdctstdscnthtmlfld = '<input type="hidden" ' | append: zp_prdct_dscntfldnattr | append: '="discount" value="' | append: zp_current_product_static_discount_data['code'] | append: '">' %}{% capture zp_prdct_atnlclscontmk %}<zpprdaccc_{{ zp_prd_blkmrkr }}></zpprdaccc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% if zp_current_entity_content contains zp_prdct_atnlclscontmk %}{% assign zp_prdct_atnlclscontnt = zp_prdct_atnlclscontnt | append: zp_crnt_prdctstdscnthtmlfld %}{% else %}{% assign zp_prdct_qtyctnr = zp_prdct_qtyctnr | append: zp_crnt_prdctstdscnthtmlfld %}{% endif %}{% endif %}{% assign zp_products_static_discounts = nil %}{% if zp_unit_price_enabled %}{% if zp_product_unit_price_tag_included %}{% if zp_first_selected_variant.unit_price_measurement %}{% assign zp_prdct_upwrcls = '' %}{% else %}{% assign zp_prdct_upwrcls = ' hidden' %}{% endif %}{% capture zp_prdct_uplbl %}{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}{% endcapture %}{% capture zp_prdct_upblk %}<span data-zp-product-unit-price>{% if zp_first_selected_variant.unit_price_measurement %}{{ zp_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-product-up-base-unit>{% if zp_first_selected_variant.unit_price_measurement %}{% if zp_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span>{% endcapture %}{% else %}{% capture zp_prdct_upblk %}{% if zp_unit_price_enabled %}<div class="zpa-offset-bottom-xs{% unless zp_first_selected_variant.unit_price_measurement %} hidden{% endunless %}" data-zp-product-unit-price-wrapper><div class="zpa-dynamic-buy-box__label--xs">{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}:</div><span data-zp-product-unit-price>{% if zp_first_selected_variant.unit_price_measurement %}{{ zp_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-product-up-base-unit>{% if zp_first_selected_variant.unit_price_measurement %}{% if zp_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span></div>{% endif %}{% endcapture %}{% assign zp_prdct_vrntctnr = zp_prdct_upblk | append: zp_prdct_vrntctnr %}{% endif %}{% endif %}{%- endform -%}{%- endcapture -%}{% assign zp_prdct_fopntg = zp_prdct_fopntg | remove: '</form>' | strip %}{%- else -%}{% if zp_product_found %}{% assign zp_unprdct_lnkblcls = '' %}{% assign zp_unprdct_blwrcls = ' hidden' %}{% endif %}{%- if zp_rndr_prdct_frtg and zp_product_content_parts contains zp_opened_cross_sell_tag -%}{% assign zp_product_with_cross_sell_tag = true %}{%- else -%}{% assign zp_product_with_cross_sell_tag = false %}{%- endif -%}{%- if zp_rndr_prdct_frmtfld -%}{% assign zp_cross_sell_content_parts = zp_current_product_settings['crsslls'] | default: zp_current_product_settings['bndl'] | default: nil %}{% for zp_cross_sell_content_part in zp_cross_sell_content_parts %}{% assign zp_csblkmrkr = zp_cross_sell_content_part | first %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_empty_wrapper_selector %}{% capture zp_crrpi %}<zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '<div style="display:none!important">' %}{% capture zp_crrpi %}</zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '</div>' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_wrapper_selector %}{% capture zp_crrpi %}zps_csimgsrc_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csimg %}{% capture zp_crrpi %}<zpcsslprc_{{ zp_csblkmrkr }}></zpcsslprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsslpr %}{% capture zp_crrpi %}<zpprscst_{{ zp_csblkmrkr }}></zpprscst_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_title %}{% capture zp_crrpi %}<zpprscsdes_{{ zp_csblkmrkr }}></zpprscsdes_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_description %}{% capture zp_crrpi %}<zpcsprc_{{ zp_csblkmrkr }}></zpcsprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcspr %}{% capture zp_crrpi %}<zpcscompareprc_{{ zp_csblkmrkr }}></zpcscompareprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcscapr %}{% capture zp_crrpi %}<zpcssvdprc_{{ zp_csblkmrkr }}></zpcssvdprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctsvam %}{% capture zp_crrpi %}<zpcsdcsamnt_{{ zp_csblkmrkr }}></zpcsdcsamnt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctam %}{% capture zp_crrpi %}<zpcsildcs_{{ zp_csblkmrkr }}></zpcsildcs_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csdsctamwsfx %}{% capture zp_crrpi %}zps_csunvavlblprdcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncscls %}{% capture zp_crrpi %}zps_csunavlbldccl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csunvbdsctcl %}{% capture zp_crrpi %}zps_csimgdattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_image_data_attrs %}{% capture zp_crrpi %}zps_csunvavlblqtycl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncsqtycls %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_csvrntcntr %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsqtyctrl_{{ zp_csblkmrkr }}></zpcsqtyctrl_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csqtycntr %}{% capture zp_crrpi %}<zpcspmsg_{{ zp_csblkmrkr }}></zpcspmsg_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csmsgs %}{% capture zp_crrpi %}<zpcsunprc_{{ zp_csblkmrkr }}></zpcsunprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupblck %}{% capture zp_crrpi %}<zpcsunplb_{{ zp_csblkmrkr }}></zpcsunplb_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csuplbl %}{% capture zp_crrpi %}zps_unvavlblcsunp_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupwrprcls %}{% capture zp_crrpi %}zps_unvavlblbndilcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unbndl_piwrcls %}{% capture zp_crrpi %}<zpcsaccc_{{ zp_csblkmrkr }}></zpcsaccc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csatnlclscnt %}{% capture zp_crrpi %}zps_qtyicrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_icr_tr %}{% capture zp_crrpi %}zps_qtyinttl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_inpt_tr %}{% capture zp_crrpi %}zps_qtydcrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_dcr_tr %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% endfor %}{%- elsif zp_product_with_cross_sell_tag -%}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_empty_wrapper_selector | replace: zp_opened_cross_sell_tag, '<div style="display:none!important" ' | replace: zp_closed_cross_sell_tag, '</div>' | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndl_piwrcls %}{%- endif -%}{%- endif -%}{% if zp_product_found %}{%- capture zp_product_init_script -%}<script type="text/json" data-zp-product-init>{"translations":{ {% if zp_product_button_caption != blank and zp_product_button_caption != '' %}"addToCart":"{{ zp_product_button_caption | url_escape }}"{% endif %} },"productSelector":"{{ zp_product_selector }}"{% if zp_selected_variants_list != '' %},"selectedVariants":"{{ zp_selected_variants_list | url_escape }}"{% endif %},"productType":"{{ zp_product_type }}","imageSize":"{{ '' | append: zp_current_product_image_size | strip | default: 'master' | url_escape }}","productDiscountData":"{{ zp_product_discount_data }}","initBuilder":{{ zp_any_product_variant_available | default: 'false' }},"sbscrbPriceRefresh":{{ zp_pscrprrf | default: 'false' }},"calculateBundlePrice":{{ zp_product_calculate_bundle_price | default: 'false' }},"defaultQty":{{ 0 | plus: zp_product_default_quantity }},"productElementId":"{{ zp_product_element_id }}"{% if zp_prdbtns_json_dt != blank %},"buttons":{{ zp_prdbtns_json_dt }}{% endif %}{% if zp_prdimgs_json_dt != blank %},"images":{{ zp_prdimgs_json_dt }}{% endif %},"imageSrcSetData":{{ zp_product_image_sizes_json }},"productBlockId":"{{ zp_product_block_id }}","preloadVariantImages":{{ zp_product_preload_variant_images }}{% if zp_prdvrnts_json_dt == blank %},"variantSelectorView":"{{ zp_prd_vrntsslctr_vw }}"{% endif %}{% if zp_prd_vrntsslctr_ofst_cls != blank %},"variantOffsetClasses":"{{ zp_prd_vrntsslctr_ofst_cls }}"{% endif %}{% if zp_prd_vrntsslctr_cls != blank %},"variantLabelClasses":"zp {{ zp_prd_vrntsslctr_cls }}"{% endif %}{% if zp_prd_shwvrntsslctr_lbl != nil %},"showVariantLabel":{{ zp_prd_shwvrntsslctr_lbl }}{% endif %}{% if zp_prdvrnts_json_dt != blank %},"variantSelectors":{{ zp_prdvrnts_json_dt }}{% endif %},"enableHistoryState":{{ zp_use_product_variant_from_url }},"productEntityType":"{{ zp_product_entity_type }}","imageGeneralContainer":{{ zp_use_general_product_image_container | default: false }},"updExternalPrice":{{ zp_update_external_product_price }}{% if zp_prd_optn_sttngs != blank %},"optionsSettings":{{ zp_prd_optn_sttngs }}{% endif %}{% if zp_prdimgs_json_dt == blank %},"enableImageLinking":{{ zp_enable_product_image_linking }}{% endif %}{% if zp_current_product_static_discount_data != blank %},"productDiscountHash":{{ zp_current_product_static_discount_data['data_hash'] | json }}{% endif %}{% if zp_product_reviews_source != blank %},"reviewsSource":{{ zp_product_reviews_source | json }}{% endif %}{% if zp_product_reviews_data != blank %},"starRatings":{{ zp_product_reviews_data }}{% endif %}{% if zp_cross_sell_config != blank %},"{{ zp_cross_sell_config_key }}":{{ zp_cross_sell_config }}{% endif %},"productEnabled":{{ zp_main_product_available }}{% if zp_prdbtns_json_dt == blank %},"redirectUrl":{{ zp_redirect_product_url | json }}{% endif %}{% if zp_prdbtns_json_dt == blank %},"redirectTarget":{{ zp_product_button_link_target | json }}{% endif %},"product":{{ zp_product_json_integration_content | default: "null" }}{{ zp_add_prdct_intstngs }}}</script>{%- endcapture -%}{% endif %}{% if zp_product_found %}{% capture zp_product_button_text %}<span class="zpa-btn-custom__caption" data-zp-add-to-cart-text>{% if zp_any_product_variant_available %}{{ zp_product_button_caption }}{% else %}{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}{% endif %}</span><svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>{% endcapture %}{% capture zp_product_sticky_button_text %}<span class="zpa-btn-custom__caption" >{% if zp_any_product_variant_available %}{{ zp_product_sticky_button_caption }}{% else %}{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}{% endif %}</span><svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>{% endcapture %}{% endif %}{% if zp_current_product_settings contains 'srtgs' %}{% assign zp_rvws_srcs = zp_current_product_settings['srtgs'] | map: 'rtgsrc' | uniq %}{% assign zp_cptr_rplc_src = true %}{% else %}{% assign zp_rvws_srcs = zp_current_product_settings['rtgsrc'] | split: ' ' %}{% assign zp_cptr_rplc_src = false %}{% endif %}{% for zp_rvs_src in zp_rvws_srcs %}{% if zp_rvs_src == blank %}{% continue %}{% endif %}{% assign zp_product_review_rating = nil %}{% assign zp_product_review_count = nil %}{% assign zp_product_review_rating_text = '' %}{% if product.id > 0 %}{% case zp_rvs_src %}{% when 'yotpo' %}{% assign zp_prd_rvwdt = product.metafields.yotpo %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prd_rvwdt.reviews_average %}{% assign zp_product_review_count = 0 | plus: zp_prd_rvwdt.reviews_count %}{% endif %}{% when 'loox' %}{% assign zp_prd_rvwdt = product.metafields.loox %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.num_reviews %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prd_rvwdt.avg_rating %}{% assign zp_product_review_count = 0 | plus: zp_prd_rvwdt.num_reviews %}{% endif %}{% when 'spr' %}{% assign zp_prd_rvwdt = product.metafields.spr.reviews %}{% if zp_prd_rvwdt %}{% assign zp_prd_rvwdt = ' ' | append: zp_prd_rvwdt | append: ' ' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"ratingValue":' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890.' | split: '' %}{% assign zp_product_review_rating = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_product_review_rating = zp_product_review_rating | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_rating = 0 | plus: zp_product_review_rating %}{% unless zp_product_review_rating > 0 %}{% assign zp_product_review_rating = nil %}{% endunless %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"reviewCount":' %}{% if zp_prd_rvw_rtgdt.size < 2 %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: '"ratingCount":' %}{% endif %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890' | split: '' %}{% assign zp_product_review_count = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_product_review_count = zp_product_review_count | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_count = 0 | plus: zp_product_review_count %}{% unless zp_product_review_count > 0 %}{% assign zp_product_review_count = nil %}{% endunless %}{% endif %}{% when 'opinew' %}{% assign zp_prd_rvwdt = product.metafields.opinew_metafields %}{% assign zp_prd_rvwcnt = 0 | plus: zp_prd_rvwdt.reviews_count %}{% if zp_prd_rvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prd_rvwdt.reviews_average %}{% assign zp_product_review_count = 0 | plus: zp_prd_rvwdt.reviews_count %}{% endif %}{% when 'judgeme' %}{% assign zp_prd_rvwdt = product.metafields.judgeme.badge %}{% if zp_prd_rvwdt %}{% assign zp_prd_rvwdt = ' ' | append: zp_prd_rvwdt | append: ' ' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: ' data-average-rating=' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890.' | split: '' %}{% assign zp_product_review_rating = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_product_review_rating = zp_product_review_rating | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_rating = 0 | plus: zp_product_review_rating %}{% unless zp_product_review_rating > 0 %}{% assign zp_product_review_rating = nil %}{% endunless %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvwdt | split: ' data-number-of-reviews=' %}{% assign zp_prd_rvw_rtgdt = zp_prd_rvw_rtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prd_rvw_avlbchr = '1234567890' | split: '' %}{% assign zp_product_review_count = '' %}{% for zp_prd_rvw_rchr in zp_prd_rvw_rtgdt %}{% if zp_prd_rvw_avlbchr contains zp_prd_rvw_rchr %}{% assign zp_product_review_count = zp_product_review_count | append: zp_prd_rvw_rchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_count = 0 | plus: zp_product_review_count %}{% unless zp_product_review_count > 0 %}{% assign zp_product_review_count = nil %}{% endunless %}{% endif %}{% endcase %}{% endif %}{% assign zp_prd_rvwdt = nil %}{% assign zp_prd_rvw_rtgdt = nil %}{% assign zp_prd_rvwcnt = nil %}{% if zp_product_review_count != empty and zp_product_review_count > 0 %}{% assign zp_product_review_wrapper_classes = '' %}{% else %}{% assign zp_product_review_wrapper_classes = 'disabled hidden' %}{% endif %}{% if zp_cptr_rplc_src %}{% assign zp_rvws_mrkr = zp_prd_blkmrkr | append: '_' | append: zp_rvs_src %}{% else %}{% assign zp_rvws_mrkr = zp_prd_blkmrkr %}{% endif %}{% if zp_product_review_rating != empty and zp_product_review_rating > 0 %}{% assign zp_product_review_rating_text = '' | append: zp_product_review_rating %}{% if zp_product_review_rating_text contains '.' %}{% assign zp_prd_rvw_rtgdt = zp_product_review_rating | split: '.' %}{% if zp_prd_rvw_rtgdt[1].size > 1 %}{% assign zp_prd_rtg_dtdcmls = '' | append: zp_prd_rvw_rtgdt[1] | split: '' %}{% assign zp_product_review_rating_text = zp_prd_rvw_rtgdt[0] | append: '.' | append: zp_prd_rtg_dtdcmls[0] %}{% endif %}{% assign zp_prd_rvw_rtgdt = nil %}{% assign zp_prd_rtg_dtdcmls = nil %}{% else %}{% assign zp_product_review_rating_text = zp_product_review_rating_text | append: '.0' %}{% endif %}{% assign zp_prd_rvw_tmprtng = zp_product_review_rating %}{% for zp_itrtr_idx in (1..5) %}{% if zp_prd_rvw_tmprtng > 0 and zp_prd_rvw_tmprtng <= 0.5 %}{% assign zp_product_rating_star_classes = 'zpa-star-half' %}{% elsif zp_prd_rvw_tmprtng > 0.5 %}{% assign zp_product_rating_star_classes = 'zpa-star-full' %}{% else %}{% assign zp_product_rating_star_classes = '' %}{% endif %}{% assign zp_prd_rtg_sitrtr = 'zps_rvic_' | append: zp_itrtr_idx %}{% assign zp_prd_rvw_tmprtng = zp_prd_rvw_tmprtng | minus: 1 %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_crrpi %}zps_rvic_{{ zp_itrtr_idx }}_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_rating_star_classes %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_prd_rtg_sitrtr, zp_product_rating_star_classes %}{% endif %}{% endfor %}{% else %}{% for zp_itrtr_idx in (1..5) %}{% assign zp_prd_rtg_sitrtr = 'zps_rvic_' | append: zp_itrtr_idx %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_crrpi %}zps_rvic_{{ zp_itrtr_idx }}_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, "" %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_prd_rtg_sitrtr, "" %}{% endif %}{% endfor %}{% endif %}{% capture zp_crrpi %}<zpprdrvavg_{{ zp_rvws_mrkr }}></zpprdrvavg_{{ zp_rvws_mrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_rating_text %}{% capture zp_crrpi %}<zpprdrvcnt_{{ zp_rvws_mrkr }}></zpprdrvcnt_{{ zp_rvws_mrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_count %}{% capture zp_crrpi %}zps_unvavlblprdrv_{{ zp_rvws_mrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_wrapper_classes %}{% endfor %}{% assign zp_hard_set_display_product_markup = false %}{% assign zp_tmp_display_product_markup = zp_display_product_markup %}{% if zp_use_current_entity_markup and zp_product_view_type == 'dynamicproductsection' %}{% assign zp_include_product_markup = true %}{% assign zp_hard_set_display_product_markup = true %}{% elsif zp_use_current_entity_markup and zp_dynamic_product_section_excluded and zp_dynamic_product_section_markup_excluded and zp_current_entity.handle == product.handle %}{% assign zp_include_product_markup = true %}{% assign zp_hard_set_display_product_markup = true %}{% assign zp_dynamic_product_section_markup_excluded = false %}{% elsif zp_use_product_markup %}{% assign zp_include_product_markup = true %}{% else %}{% assign zp_include_product_markup = false %}{% endif %}{% if zp_include_product_markup %}{% if zp_hard_set_display_product_markup %}{% assign zp_display_product_markup = true %}{% endif %}{%- if zp_product_found and zp_display_product_markup -%}{% assign zp_product_custom_title = zp_product_custom_title | strip_html | strip | default: product.title | strip_html | strip %}{% assign zp_product_custom_description = zp_product_custom_description | strip_html | strip | default: product.description | strip_html | strip %}{% if zp_current_selected_variant != blank %}{% assign zp_product_schema_variant = zp_current_selected_variant %}{% else %}{% assign zp_product_schema_variant = zp_first_selected_variant %}{% endif %}{% assign zp_product_custom_image = zp_product_custom_image | strip | default: zp_product_image | strip %}{% if zp_prdct_shcrlenbl or zp_pcrls_dt != blank %}{% if zp_first_selected_variant.available and zp_first_selected_variant.featured_media != blank and zp_first_selected_variant.featured_media.media_type == 'image' %}{% assign zp_product_custom_image_obj = zp_first_selected_variant.featured_media %}{% else %}{% assign zp_product_custom_image_obj = product.media | where: 'media_type', 'image' | first | default: zp_product_schema_variant.featured_image | default: product.featured_image %}{% endif %}{% assign zp_product_custom_image = zp_product_custom_image_obj | image_url: width: zp_product_custom_image_obj.preview_image.width | prepend: 'https:' %}{% elsif zp_product_custom_image == blank or zp_product_custom_image == '' or zp_product_custom_image contains '/default_images_product_icon_360x240.jpg' %}{% assign zp_product_custom_image_obj = zp_product_schema_variant.featured_image | default: product.featured_image %}{% assign zp_product_custom_image = zp_product_custom_image_obj | image_url: width: zp_product_custom_image_obj.preview_image.width | prepend: 'https:' %}{% endif %}{%- endif -%}{% if zp_main_product_available %}{% capture zp_prdct_ftrintgrtn -%}<zp_product_additional_footer_integration></zp_product_additional_footer_integration>{%- endcapture %}{% else %}{% assign zp_prdct_ftrintgrtn = '' %}{% endif %}{% capture zp_product_markup_integration %}{% if zp_product_found and zp_display_product_markup %}<script type="application/ld+json">{"@context":"http://schema.org/","@type":"Product",{% if product.vendor != blank %}"brand":{"@type":"Brand","name":{{ product.vendor | json }}},{% endif %}"name":{{ zp_product_custom_title | json }},"description":{{ zp_product_custom_description | json }},"url":{{ request.origin | append: zp_current_entity.url | json }},{% if zp_product_custom_image != blank %}"image":[{{ zp_product_custom_image | json }}],{% endif %}{% if zp_product_schema_variant.sku != blank %}"sku":{{ zp_product_schema_variant.sku | json }},{% endif %}"offers":[{% assign zp_prd_schema_offer_separator = '' %}{% for zp_prd_variant in zp_current_product_custom_variants %}{% assign zp_variant_id = '' | append: zp_prd_variant.id %}{% unless zp_selected_variants contains zp_variant_id %}{% continue %}{% endunless %}{{ zp_prd_schema_offer_separator }}{% assign zp_prd_schema_offer_separator = ',' %}{% assign zp_prd_variant_prc = zp_prd_variant.price %}{% if zp_prd_variant.compare_at_price > zp_prd_variant.price %}{% assign zp_prd_variant_cmpr_prc = zp_prd_variant.compare_at_price %}{% else %}{% assign zp_prd_variant_cmpr_prc = nil %}{% endif %}{% assign zp_prd_variant_dscnt_amnt_recalculate = true %}{% assign zp_prd_variant_dscnt_amnt_money = false %}{% assign zp_prd_variant_dscnt_amnt_prefix = '' %}{% assign zp_prd_variant_dscnt_amnt_suffix = '' %}{% if zp_product_discount_data contains ':' %}{% assign zp_product_discount_data = zp_product_discount_data | split: ':' %}{% assign zp_split_discount_data = true %}{% else %}{% assign zp_split_discount_data = false %}{% endif %}{% if zp_product_discount_data.size > 1 %}{% assign zp_prd_variant_dscnt_amnt = 0 | plus: zp_product_discount_data[0] | abs %}{% assign zp_prd_variant_dscnt_tp = '' | append: zp_product_discount_data[1] %}{% if zp_prd_variant_dscnt_tp == 'percentage' or zp_prd_variant_dscnt_tp == 'percentage_dynamic' %}{% assign zp_product_discount_amount_parts = '' | append: zp_prd_variant_dscnt_amnt | split: '.' %}{% assign zp_product_discount_decimal_part = '' | append: zp_product_discount_amount_parts[1] | default: '0' %}{% assign zp_product_discount_decimal_part = 0 | plus: zp_product_discount_decimal_part %}{% unless zp_product_discount_decimal_part > 0 %}{% assign zp_prd_variant_dscnt_amnt = zp_product_discount_amount_parts[0] %}{% endunless %}{% assign zp_prd_variant_dscnt_amnt = 0 | plus: zp_prd_variant_dscnt_amnt | at_most: 100 %}{% assign zp_prd_variant_svd_amnt = zp_prd_variant_prc | times: zp_prd_variant_dscnt_amnt | divided_by: 100 | at_most: zp_prd_variant_prc %}{% assign zp_prd_variant_dscnt_amnt_recalculate = false %}{% assign zp_prd_variant_dscnt_amnt_suffix = '%' %}{% elsif zp_prd_variant_dscnt_tp == 'compare_price' %}{% if zp_prd_variant_cmpr_prc %}{% assign zp_prd_variant_dscnt_amnt = zp_prd_variant_cmpr_prc | minus: zp_prd_variant_prc %}{% else %}{% assign zp_prd_variant_dscnt_amnt = 0 %}{% assign zp_prd_variant_unvlbl_dscnt_cls = 'hidden' %}{% endif %}{% assign zp_prd_variant_svd_amnt = zp_prd_variant_dscnt_amnt %}{% else %}{% assign zp_prd_variant_dscnt_amnt = zp_prd_variant_dscnt_amnt | times: 100 %}{% assign zp_prd_variant_dscnt_amnt = '' | append: zp_prd_variant_dscnt_amnt | split: '.' | first | default: 0 %}{% assign zp_prd_variant_dscnt_amnt = 0 | plus: zp_prd_variant_dscnt_amnt | at_most: zp_prd_variant_prc %}{% assign zp_prd_variant_svd_amnt = zp_prd_variant_dscnt_amnt %}{% assign zp_prd_variant_dscnt_amnt_money = true %}{% endif %}{% if zp_prd_variant_dscnt_tp == 'compare_price' %}{% assign zp_prd_variant_sale_prc = zp_prd_variant_prc %}{% else %}{% assign zp_prd_variant_sale_prc = zp_prd_variant_prc | minus: zp_prd_variant_svd_amnt %}{% endif %}{% assign zp_prd_variant_dscnt_amnt_prefix = '-' %}{% else %}{% assign zp_prd_variant_sale_prc = zp_prd_variant_prc %}{% assign zp_prd_variant_unvlbl_dscnt_cls = 'hidden' %}{% assign zp_prd_variant_dscnt_amnt = 0 %}{% endif %}{% if zp_split_discount_data %}{% assign zp_product_discount_data = zp_product_discount_data | join: ':' %}{% endif %}{"@type":"Offer",{% if zp_prd_variant.sku != blank %}"sku":{{ zp_prd_variant.sku | json }},{% endif %}{% if zp_prd_variant.barcode.size == 12 %}"gtin12":{{ zp_prd_variant.barcode }},{% endif %}{% if zp_prd_variant.barcode.size == 13 %}"gtin13":{{ zp_prd_variant.barcode }},{% endif %}{% if zp_prd_variant.barcode.size == 14 %}"gtin14":{{ zp_prd_variant.barcode }},{% endif %}"url":{{ request.origin | append: zp_prd_variant.url | json }},"priceCurrency":{{ cart.currency.iso_code | json }},"price":{{ zp_prd_variant_sale_prc | divided_by: 100.00 | json }},"availability":"http://schema.org/{% if zp_prd_variant.available %}InStock{% else %}OutOfStock{% endif %}"}{% endfor %}]{% if zp_product_review_count %},"aggregateRating":{"@type":"AggregateRating","ratingValue":{{ zp_product_review_rating | json }},"ratingCount":{{ zp_product_review_count | json }}}{% endif %}}</script>{% endif %}{% endcapture %}{% assign zp_display_product_markup = zp_tmp_display_product_markup %}{% assign zp_tmp_display_product_markup = nil %}{% else %}{% assign zp_product_markup_integration = '' %}{% endif %}{% if zp_rndr_prdct_frtg and zp_product_view_type == 'dynamicproductsection' %}{% assign zp_selected_variant_image_id = zp_first_selected_variant.image.id %}{% if zp_selected_variant_image_id != blank %}{% assign zp_carousel_image_id_search = ' data-pc-thumb-img="' | append: zp_selected_variant_image_id | append: '"' %}{% assign zp_carousel_image_id_replace = zp_carousel_image_id_search | append: ' data-default-active' %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_carousel_image_id_search, zp_carousel_image_id_replace %}{% endif %}{% endif %}{%- else -%}{%- if zp_rndr_prdct_frtg and zp_product_content_parts contains zp_opened_cross_sell_tag -%}{% assign zp_product_with_cross_sell_tag = true %}{%- else -%}{% assign zp_product_with_cross_sell_tag = false %}{%- endif -%}{%- if zp_rndr_prdct_frmtfld -%}{% assign zp_cross_sell_content_parts = zp_current_product_settings['crsslls'] | default: zp_current_product_settings['bndl'] | default: nil %}{% for zp_cross_sell_content_part in zp_cross_sell_content_parts %}{% assign zp_csblkmrkr = zp_cross_sell_content_part | first %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_empty_wrapper_selector %}{% capture zp_crrpi %}<zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '<div style="display:none!important">' %}{% capture zp_crrpi %}</zpdcsprdct_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '</div>' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_wrapper_selector %}{% capture zp_crrpi %}zps_csimgsrc_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csimg %}{% capture zp_crrpi %}<zpcsslprc_{{ zp_csblkmrkr }}></zpcsslprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsslpr %}{% capture zp_crrpi %}<zpprscst_{{ zp_csblkmrkr }}></zpprscst_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_title %}{% capture zp_crrpi %}<zpprscsdes_{{ zp_csblkmrkr }}></zpprscsdes_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_product_description %}{% capture zp_crrpi %}<zpcsprc_{{ zp_csblkmrkr }}></zpcsprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcspr %}{% capture zp_crrpi %}<zpcscompareprc_{{ zp_csblkmrkr }}></zpcscompareprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcscapr %}{% capture zp_crrpi %}<zpcssvdprc_{{ zp_csblkmrkr }}></zpcssvdprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctsvam %}{% capture zp_crrpi %}<zpcsdcsamnt_{{ zp_csblkmrkr }}></zpcsdcsamnt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_fmcsdsctam %}{% capture zp_crrpi %}<zpcsildcs_{{ zp_csblkmrkr }}></zpcsildcs_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csdsctamwsfx %}{% capture zp_crrpi %}zps_csunvavlblprdcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncscls %}{% capture zp_crrpi %}zps_csunavlbldccl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csunvbdsctcl %}{% capture zp_crrpi %}zps_csimgdattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_image_data_attrs %}{% capture zp_crrpi %}zps_csunvavlblqtycl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncsqtycls %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_csvrntcntr %}{% capture zp_crrpi %}<zpcsvrnts_{{ zp_csblkmrkr }}></zpcsvrnts_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsqtyctrl_{{ zp_csblkmrkr }}></zpcsqtyctrl_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csqtycntr %}{% capture zp_crrpi %}<zpcspmsg_{{ zp_csblkmrkr }}></zpcspmsg_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csmsgs %}{% capture zp_crrpi %}<zpcsunprc_{{ zp_csblkmrkr }}></zpcsunprc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupblck %}{% capture zp_crrpi %}<zpcsunplb_{{ zp_csblkmrkr }}></zpcsunplb_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csuplbl %}{% capture zp_crrpi %}zps_unvavlblcsunp_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csupwrprcls %}{% capture zp_crrpi %}zps_unvavlblbndilcl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unbndl_piwrcls %}{% capture zp_crrpi %}<zpcsaccc_{{ zp_csblkmrkr }}></zpcsaccc_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csatnlclscnt %}{% capture zp_crrpi %}zps_qtyicrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_icr_tr %}{% capture zp_crrpi %}zps_qtyinttl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_inpt_tr %}{% capture zp_crrpi %}zps_qtydcrtl_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cs_qty_dcr_tr %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_csblkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctw_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcim_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcsctwt_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspcti_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpcspctv_{{ zp_csblkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% endfor %}{%- elsif zp_product_with_cross_sell_tag -%}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bundle_block_enabled %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_empty_wrapper_selector | replace: zp_opened_cross_sell_tag, '<div style="display:none!important" ' | replace: zp_closed_cross_sell_tag, '</div>' | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndl_piwrcls %}{%- endif -%}{%- endif -%}{% if zp_rndr_prdct_frmtfld %}{% capture zp_prdct_vrnttgn %}<zpprdvrnts_{{ zp_prd_blkmrkr }}></zpprdvrnts_{{ zp_prd_blkmrkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_prdct_vrnttgn %}{% assign zp_prdct_atnlclscontnt = zp_prdct_atnlclscontnt | append: zp_prdct_vrntctnr %}{% endunless %}{% capture zp_prdct_qtytgn %}<zpprdqtyctrl_{{ zp_prd_blkmrkr }}></zpprdqtyctrl_{{ zp_prd_blkmrkr }}>{% endcapture %}{% if zp_current_entity_content contains zp_prdct_qtytgn %}{% assign zp_prdct_ioqtytg = true %}{% else %}{% assign zp_prdct_ioqtytg = false %}{% endif %}{% capture zp_prdct_qtytgn %}zps_qtyattr_{{ zp_prd_blkmrkr }}{% endcapture %}{% if zp_current_entity_content contains zp_prdct_qtytgn %}{% assign zp_prdct_inqtytg = true %}{% else %}{% assign zp_prdct_inqtytg = false %}{% endif %}{% if zp_prdct_ioqtytg == false and zp_prdct_inqtytg == false %}{% assign zp_prdct_atnlclscontnt = zp_prdct_atnlclscontnt | append: zp_prdct_qtyctnr %}{% endif %}{% if zp_prdct_atnlclscontnt.size > 0 %}{% assign zp_prdct_atnlclscontnt = '<div style="display:none!important">' | append: zp_prdct_atnlclscontnt | append: '</div>' %}{% endif %}{% assign zp_additional_product_footer_data = '' | append: zp_product_additional_integrations | append: zp_product_init_script | append: zp_product_markup_integration | append: zp_product_footer_integration_content %}{% capture zp_crrpi %}zp_product_wrapper_selector_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_wrapper_selector %}{% capture zp_crrpi %}<zpprdprc_{{ zp_prd_blkmrkr }}></zpprdprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_formatted_product_price %}{% capture zp_crrpi %}<zpprdcompareprc_{{ zp_prd_blkmrkr }}></zpprdcompareprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_formatted_product_compare_at_price %}{% capture zp_crrpi %}<zpprdvrnts_{{ zp_prd_blkmrkr }}></zpprdvrnts_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_prdct_vrntctnr %}{% capture zp_crrpi %}<zpprdvrnts_{{ zp_prd_blkmrkr }}></zpprdvrnts_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpprdqtyctrl_{{ zp_prd_blkmrkr }}></zpprdqtyctrl_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_qtyctnr %}{% capture zp_crrpi %}<zpprdform_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_fopntg %}{% capture zp_crrpi %}</zpprdform_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_fcstg %}{% capture zp_crrpi %}zps_unvavlblprdcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_cls %}{% capture zp_crrpi %}zps_unavlbldccl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unavailable_discount_class %}{% capture zp_crrpi %}zps_unvvlblprdpdwc_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_percentage_discount_diff_wrapper_class %}{% capture zp_crrpi %}zps_unvavlblqtycl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unqtycls %}{% capture zp_crrpi %}<zpprdbtntxt_{{ zp_prd_blkmrkr }}></zpprdbtntxt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_button_text %}{% capture zp_crrpi %}<zpprdstkbtntxt_{{ zp_prd_blkmrkr }}></zpprdstkbtntxt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_sticky_button_text %}{% capture zp_crrpi %}zps_prdbtntp_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_button_type %}{% capture zp_crrpi %}<zpprdbtnintgr_{{ zp_prd_blkmrkr }}></zpprdbtnintgr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_btnintgrtns %}{% capture zp_crrpi %}<zpprdbtnmsg_{{ zp_prd_blkmrkr }}></zpprdbtnmsg_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_btnmsgs %}{% capture zp_crrpi %}zps_prdimgsrc_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_image %}{% capture zp_crrpi %}zps_prdimgdattr_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_image_data_attrs %}{% capture zp_crrpi %}<zpprdslprc_{{ zp_prd_blkmrkr }}></zpprdslprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_formatted_product_sale_price %}{% capture zp_crrpi %}<zpprdsvdprc_{{ zp_prd_blkmrkr }}></zpprdsvdprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_formatted_product_saved_amount %}{% capture zp_crrpi %}<zpprddcsamnt_{{ zp_prd_blkmrkr }}></zpprddcsamnt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_formatted_product_discount_amount %}{% capture zp_crrpi %}<zpprdildcs_{{ zp_prd_blkmrkr }}></zpprdildcs_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_discount_amount_with_suffix %}{% capture zp_crrpi %}<zpprdimgldr_{{ zp_prd_blkmrkr }}></zpprdimgldr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_imgldct %}{% capture zp_crrpi %}<zppradtnfintgr_{{ zp_prd_blkmrkr }}></zppradtnfintgr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_ftrintgrtn %}{% capture zp_crrpi %}<zpprdunprc_{{ zp_prd_blkmrkr }}></zpprdunprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_upblk %}{% capture zp_crrpi %}<zpprdunplb_{{ zp_prd_blkmrkr }}></zpprdunplb_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_uplbl %}{% capture zp_crrpi %}zps_unvavlblprdunp_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_upwrcls %}{% capture zp_crrpi %}zps_csunvavlblgcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_uncs_wrprcls %}{% capture zp_crrpi %}<zpprdfptrm_{{ zp_prd_blkmrkr }}></zpprdfptrm_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prd_fpmtrmcptr %}{% capture zp_crrpi %}zps_unavlblfptrm_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_fptrmscls %}{% capture zp_crrpi %}<zpprdrvavg_{{ zp_prd_blkmrkr }}></zpprdrvavg_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_rating_text %}{% capture zp_crrpi %}<zpprdrvcnt_{{ zp_prd_blkmrkr }}></zpprdrvcnt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_count %}{% capture zp_crrpi %}zps_unvavlblprdrv_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_wrapper_classes %}{% capture zp_crrpi %}<zpprspt_{{ zp_prd_blkmrkr }}></zpprspt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_title %}{% capture zp_crrpi %}<zpprspdes_{{ zp_prd_blkmrkr }}></zpprspdes_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_description %}{% capture zp_crrpi %}<zppdcb_{{ zp_prd_blkmrkr }}></zppdcb_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_checkout_button %}{% capture zp_crrpi %}<zpprdaccc_{{ zp_prd_blkmrkr }}></zpprdaccc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prdct_atnlclscontnt %}{% capture zp_crrpi %}zps_unvavlblbndilcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unbndl_piwrcls %}{% capture zp_crrpi %}zps_csunvavlblbwcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_smpbndlprdctwprprcls %}{% capture zp_crrpi %}zps_qtyicrtl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prd_qty_icr_tr %}{% capture zp_crrpi %}zps_qtyinttl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prd_qty_inpt_tr %}{% capture zp_crrpi %}zps_qtydcrtl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_prd_qty_dcr_tr %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace_first: zp_crrpi, zp_prd_qtyaattr %}{% capture zp_crrpi %}<zplpsbcr_{{ zp_prd_blkmrkr }}></zplpsbcr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_lpscrwgc %}{% capture zp_crrpi %}<zpaptsbcr_{{ zp_prd_blkmrkr }}></zpaptsbcr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_aptscrwgc %}{% capture zp_crrpi %}<zpslsbcr_{{ zp_prd_blkmrkr }}></zpslsbcr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_slscrwgc %}{% capture zp_crrpi %}<zprcsbcr_{{ zp_prd_blkmrkr }}></zprcsbcr_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_rcscrwgc %}{% capture zp_crrpi %}zps_qtyattr_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpdprdct_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, "" %}{% capture zp_crrpi %}</zpdprdct_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_additional_product_footer_data %}{% if zp_product_sold_out_view_enabled %}{% capture zp_crrpi %}zps_unvavlblprdwcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_blwrcls %}{% capture zp_crrpi %}zps_unvavlbllnkcl_{{ zp_prd_blkmrkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_lnkblcls %}{% endif %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_product_wrapper_selector', zp_product_wrapper_selector | replace: '<zpprdprc></zpprdprc>', zp_formatted_product_price | replace: '<zpprdcompareprc></zpprdcompareprc>', zp_formatted_product_compare_at_price | replace_first: '<zpprdvrnts></zpprdvrnts>', zp_prdct_vrntctnr | replace: '<zpprdqtyctrl></zpprdqtyctrl>', zp_prdct_qtyctnr | replace: '<zpprdform>', zp_prdct_fopntg | replace: '</zpprdform>', zp_prdct_fcstg | replace: 'zps_unvavlblprdcl', zp_unprdct_cls | replace: 'zps_unavlbldccl', zp_unavailable_discount_class | replace: 'zps_unvavlblqtycl', zp_unqtycls | replace: '<zpprdbtntxt></zpprdbtntxt>', zp_product_button_text | replace: '<zpprdstkbtntxt></zpprdstkbtntxt>', zp_product_sticky_button_text | replace: 'zps_prdbtntp', zp_product_button_type | replace: '<zpprdbtnintgr></zpprdbtnintgr>', zp_prdct_btnintgrtns | replace: '<zpprdbtnmsg></zpprdbtnmsg>', zp_prdct_btnmsgs | replace: 'zps_prdimgsrc', zp_product_image | replace: 'zps_prdimgdattr', zp_product_image_data_attrs | replace: '<zpprdslprc></zpprdslprc>', zp_formatted_product_sale_price | replace: '<zpprdsvdprc></zpprdsvdprc>', zp_formatted_product_saved_amount | replace: '<zpprddcsamnt></zpprddcsamnt>', zp_formatted_product_discount_amount | replace: '<zpprdimgldr></zpprdimgldr>', zp_prdct_imgldct | replace: '<zppradtnfintgr></zppradtnfintgr>', zp_prdct_ftrintgrtn | replace: '<zpprdunprc></zpprdunprc>', zp_prdct_upblk | replace: '<zpprdunplb></zpprdunplb>', zp_prdct_uplbl | replace: 'zps_unvavlblprdunp', zp_prdct_upwrcls | replace: 'zps_csunvavlblgcl', zp_uncs_wrprcls | replace: '<zpprdfptrm></zpprdfptrm>', zp_prd_fpmtrmcptr | replace: 'zps_unavlblfptrm', zp_unprdct_fptrmscls | replace: '<zpprdrvavg></zpprdrvavg>', zp_product_review_rating_text | replace: '<zpprdrvcnt></zpprdrvcnt>', zp_product_review_count | replace: 'zps_unvavlblprdrv', zp_product_review_wrapper_classes | replace: '<zpprdmrkp></zpprdmrkp>', '' %}{% assign zp_current_entity_content = zp_current_entity_content | append: zp_product_additional_integrations | append: zp_product_content_parts | append: zp_product_init_script | append: zp_product_markup_integration | append: zp_product_footer_integration_content | append: zp_product_content[1] %}{% if zp_product_sold_out_view_enabled %}{% capture zp_crrpi %}zps_unvavlblprdwcl_{{ zp_product_element_id }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_blwrcls %}{% capture zp_crrpi %}zps_unvavlbllnkcl_{{ zp_product_element_id }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unprdct_lnkblcls %}{% endif %}{% endif %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_crrpi %}<zpctw_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpctw_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zppcim_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zppcim_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zppcv_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zppcv_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zpctwt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zpctwt_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zppcti_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zppcti_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}<zppctv_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% capture zp_crrpi %}</zppctv_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' %}{% if zp_product_found %}{% assign zp_prd_unvbl_txt = 'products.product.sold_out' | t %}{% if zp_prd_unvbl_txt contains 'Translation missing' or zp_prd_unvbl_txt contains 'translation missing' %}{% assign zp_prd_unvbl_txt = "Sold Out" %}{% endif %}{% else %}{% assign zp_prd_unvbl_txt = zp_product_button_text %}{% endif %}{% for zp_btn_stngs in zp_current_product_settings['btns'] %}{% capture zp_btn_tg %}<zpprdsbtntxt_{{ zp_prd_blkmrkr }}_{{ zp_btn_stngs['id'] }}></zpprdsbtntxt_{{ zp_prd_blkmrkr }}_{{ zp_btn_stngs['id'] }}>{% endcapture %}{% if zp_any_product_variant_available %}{% assign zp_btn_cpt = zp_btn_stngs['cpt'] %}{% else %}{% assign zp_btn_cpt = zp_prd_unvbl_txt %}{% endif %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_btn_tg, zp_btn_cpt %}{% endfor %}{% endif %}{% if zp_product_static_price_content.size > 0 %}{% assign zp_product_static_price_content = zp_product_static_price_content | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %}{% if zp_app_integrations contains 'bestcurrencyconverter' %}{% assign zp_static_price = zp_product_static_price_content | strip | strip_html | split: '' %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = "0123456789,. '" | split: '' %}{% assign zp_price_delimiter_detected = false %}{% for zp_tmp_part in zp_static_price %}{% if zp_available_chars contains zp_tmp_part %}{% if zp_tmp_part == ',' or zp_tmp_part == '.' %}{% assign zp_price_delimiter_detected = true %}{% assign zp_static_price_char = zp_tmp_part %}{% elsif zp_tmp_part == ' ' and zp_price_delimiter_detected %}{% assign zp_price_delimiter_detected = false %}{% assign zp_static_price_char = '__zp1502150400__' %}{% else %}{% assign zp_static_price_char = zp_tmp_part %}{% endif %}{% else %}{% assign zp_static_price_char = '__zp1502150400__' %}{% endif %}{% assign zp_static_selected_prices = zp_static_selected_prices | append: zp_static_price_char %}{% endfor %}{% assign zp_static_price = '' %}{% assign zp_static_selected_prices = zp_static_selected_prices | split: '__zp1502150400__' %}{% for zp_tmp_part in zp_static_selected_prices %}{% assign zp_tmppart = '' | append: zp_tmp_part | strip %}{% if zp_tmppart.size > 0 %}{% assign zp_tmppart = zp_amount_format_template | replace: zp_amount_template, zp_tmppart %}{% assign zp_tmppart_without_html = zp_tmppart | strip_html | strip %}{% assign zp_product_static_price_content = zp_product_static_price_content | replace: zp_tmppart_without_html, zp_tmppart %}{% endif %}{% endfor %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = '' %}{% assign zp_tmppart = '' %}{% assign zp_tmppart_without_html = '' %}{% endif %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_updated_product_price %}<zpprdstcprc_{{ zp_prd_blkmrkr }}></zpprdstcprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_updated_product_price, zp_product_static_price_content %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: '<zpprdstcprc></zpprdstcprc>', zp_product_static_price_content %}{% endif %}{% endif %}{% if zp_product_static_compare_price_content.size > 0 %}{% assign zp_product_static_compare_price_content = zp_product_static_compare_price_content | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %}{% if zp_app_integrations contains 'bestcurrencyconverter' %}{% assign zp_static_price = zp_product_static_compare_price_content | strip | strip_html | split: '' %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = "0123456789,. '" | split: '' %}{% assign zp_price_delimiter_detected = false %}{% for zp_tmp_part in zp_static_price %}{% if zp_available_chars contains zp_tmp_part %}{% if zp_tmp_part == ',' or zp_tmp_part == '.' %}{% assign zp_price_delimiter_detected = true %}{% assign zp_static_price_char = zp_tmp_part %}{% elsif zp_tmp_part == ' ' and zp_price_delimiter_detected %}{% assign zp_price_delimiter_detected = false %}{% assign zp_static_price_char = '__zp1502150400__' %}{% else %}{% assign zp_static_price_char = zp_tmp_part %}{% endif %}{% else %}{% assign zp_static_price_char = '__zp1502150400__' %}{% endif %}{% assign zp_static_selected_prices = zp_static_selected_prices | append: zp_static_price_char %}{% endfor %}{% assign zp_static_price = '' %}{% assign zp_static_selected_prices = zp_static_selected_prices | split: '__zp1502150400__' %}{% for zp_tmp_part in zp_static_selected_prices %}{% assign zp_tmppart = '' | append: zp_tmp_part | strip %}{% if zp_tmppart.size > 0 %}{% assign zp_tmppart = zp_amount_format_template | replace: zp_amount_template, zp_tmppart %}{% assign zp_tmppart_without_html = zp_tmppart | strip_html | strip %}{% assign zp_product_static_compare_price_content = zp_product_static_compare_price_content | replace: zp_tmppart_without_html, zp_tmppart %}{% endif %}{% endfor %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = '' %}{% assign zp_tmppart = '' %}{% assign zp_tmppart_without_html = '' %}{% endif %}{% if zp_rndr_prdct_frmtfld %}{% capture zp_updated_product_price %}<zpprdstccprprc_{{ zp_prd_blkmrkr }}></zpprdstccprprc_{{ zp_prd_blkmrkr }}>{% endcapture %}{% assign zp_product_content_parts = zp_product_content_parts | replace: zp_updated_product_price, zp_product_static_compare_price_content %}{% else %}{% assign zp_product_content_parts = zp_product_content_parts | replace: '<zpprdstccprprc></zpprdstccprprc>', zp_product_static_compare_price_content %}{% endif %}{% endif %}{%- endif -%}{%- endfor -%}{% assign zp_prdct_shcrlenbl = false %}{% assign zp_pcrls_dt = nil %}{% assign zp_lpscrwgc = nil %}{% assign zp_aptscrwgc = nil %}{% assign zp_slscrwgc = nil %}{% if zp_app_integrations contains 'shoppaywidget' %}{% assign zp_spwvcl = '' %}{% else %}{% assign zp_spwvcl = 'hidden' %}{% endif %}{% assign zp_optgcnt = '<div style="display:none" data-id=' %}{% assign zp_cltgcnt = '</div data-id=' %}{% assign zp_current_entity_content = zp_current_entity_content | replace: 'zps_dsbspintgcl', zp_spwvcl | replace: '<zpprdbtnldr></zpprdbtnldr>', '<svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>' | replace: '<zpprdicrqtyicn></zpprdicrqtyicn>', '<svg class="zpa-quantity-selector__icon" width="10px" height="10px"><use href="#iconIncrease"></use></svg>' | replace: '<zpprddcrqtyicn></zpprddcrqtyicn>', '<svg class="zpa-quantity-selector__icon" width="10px" height="10px"><use href="#iconDecrease"></use></svg>' | replace: '<zpprdstrricn></zpprdstrricn>', '<svg class="zpa-review-stars__icon" width="24px" height="24px"><use href="#reviewStars"></use></svg>' | replace: '<zpprdimgldr></zpprdimgldr>', '<svg class="hidden" width="215px" height="150px" data-zp-image-loader><use href="#elementLoader"></use></svg>' | replace: '<zpdcsprdct_', zp_optgcnt | replace: '</zpdcsprdct_', zp_cltgcnt | replace: '<zpprdscj_', zp_optgcnt | replace: '</zpprdscj_', zp_cltgcnt | replace: '<zpctw_', zp_optgcnt | replace: '</zpctw_', zp_cltgcnt | replace: '<zpctwt_', zp_optgcnt | replace: '</zpctwt_', zp_cltgcnt %} 